@{
    //  Layout = null;
    var myAreaName = string.Empty;
    object areaObj;
    if (ViewContext.RouteData.Values.TryGetValue("area", out areaObj))
    {
        myAreaName = areaObj.ToString();
    }
    var appurl = string.Format("~/areas /{0}/JS/App.js", myAreaName);

}
@*<link href="http://localhost:22397/Scripts/ngScript/style/autocomplete.css" rel="stylesheet" />*@
<script src="~/Scripts/angular.min.js"></script>
<script src="~/OldContent/js/angular-animate.min.js"></script>
<script src="~/Content/Kendo/kendoAllNew.js"></script>

@*<script data-require="angular.js@1.2.13" data-semver="1.2.13" src="http://code.angularjs.org/1.2.13/angular.js"></script>
    <script data-require="angular.js@1.2.13" data-semver="1.2.13" src="http://code.angularjs.org/1.2.13/angular-animate.js"></script>*@
<style>
    .pos .content-wrapper .layout-table {
        position: absolute;
        min-width: 1020px !important;
    }

    .k-list.k-reset {
        max-height: 400px !important;
        overflow: hidden !important;
    }

    .pos #list-table-div {
        max-height: 254px;
        overflow-y: auto;
        min-height: 254px !important;
        height: auto !important;
    }

    .k-list-scroller, #customers-list {
        height: auto !important;
    }

    .ps-scrollbar-y-rail, .ps-scrollbar-y {
        min-height: 0px !important;
        height: auto !important;
    }

    .p-imagebox > img {
        width: 100%;
        height: auto !important;
        max-height: 97px;
    }
</style>
<link rel="stylesheet" href="style.css" />

<div ng-app="myApp" ng-controller="POSController" class="pos content-wrapper">

    <div class="col-lg-12 alerts">
    </div>


    <table style="width:100%;" class="layout-table">
        <tr>
            <td style="width: 460px; float:left;">

                <div id="pos">
                    <form>

                        <div class="well well-sm" id="leftdiv">
                            <div id="lefttop" style="margin-bottom:5px;">
                                <div class="form-group" style="margin-bottom:5px;">
                                    <div class="input-group">
                                        @*<select name="customer_id" id="spos_customer" data-placeholder="Select Customer" required="required" class="form-control select2" style="width:100%;">
                                                <option value="1">Walk-in Client</option>
                                            </select>*@

                                        <input id="customers" style="width: 100%; height:100%" />

                                        <div class="input-group-addon no-print" style="padding: 2px 5px;">
                                            <a href="#" id="add-customer" class="external" data-toggle="modal" ng-click="addcustomer" data-target="#myModal">
                                                <i class="fa fa-2x fa-plus-circle" id="addIcon"></i>
                                            </a>
                                        </div>
                                    </div>

                                    <div style="clear:both;"></div>
                                </div>
                                <div class="form-group" style="margin-bottom:5px;">
                                    <input type="text" name="code" id="add_item" ng-model="searchText" ng-change="ChangePaginate()" ng-keyup="searchByText(filterProduct)" class="form-control" placeholder="Search product by code or name, you can scan barcode too" />
                                    @*<button ng-click="searchByText(filterProduct)"></button>*@
                                </div>

                                @*<input kendo-auto-complete ng-model="myFruit" k-options="foodDataSource"  />*@
                            </div>
                            <div id="printhead" class="print" style="display:none;">
                                <h2><strong>Simple POS</strong></h2>
                                My Shop Lot, Shopping Mall,<br>
                                Post Code, City<br>
                                <p>Date: Wed 24 Aug 2016</p>
                            </div>
                            <div id="print">
                                <div id="list-table-div">
                                    <table id="posTable" class="table table-striped table-condensed table-hover list-table" style="margin:0;">
                                        <thead>
                                            <tr class="success">
                                                <th>Product</th>
                                                <th style="width: 15%;text-align:center;">Price</th>
                                                <th style="width: 15%;text-align:center;">Qty</th>
                                                <th style="width: 20%;text-align:center;">Subtotal</th>
                                                <th style="width: 20px;" class="satu"><i class="fa fa-trash-o"></i></th>
                                            </tr>
                                        </thead>
                                        <tbody>

                                            <tr ng-repeat="item in order">
                                                <td>
                                                    <button type="button" class="btn bg-purple btn-block btn-xs edit">
                                                        <span style="padding: 3px; width: 130px; word-break: break-all; word-wrap: break-word;" class="sname" ng-click="showdetail(item, $index)">{{item.item.ProductName}}</span>
                                                    </button>

                                                </td>
                                                <td>
                                                    {{item.totalPrice}}
                                                </td>
                                                <td>
                                                    {{item.orderedItemCnt}}
                                                </td>
                                                <td>
                                                    {{item.orderedItemCnt*item.totalPrice}}
                                                </td>
                                                <td>
                                                    <button type="button" class="btn btn-danger btn-xs" ng-click="deleteItem($index)">
                                                        <span class="glyphicon glyphicon-trash"></span>
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div style="clear:both;"></div>
                                <div id="totaldiv">
                                    <table id="totaltbl" class="table table-condensed totals" style="margin-bottom:10px;">
                                        <tbody>
                                            <tr class="info">
                                                <td width="25%">Total Items</td>
                                                <td class="text-right" style="padding-right:10px;"><span id="count">0</span></td>
                                                <td width="25%">Total</td>
                                                <td class="text-right" colspan="2"><span id="total">0</span></td>
                                            </tr>
                                            <tr class="info">
                                                <td width="25%"><a href="#" id="add_discount" ng-click="discountlable()">Discount</a></td>
                                                <td class="text-right" style="padding-right:10px;"><span id="ds_con">{{disountper}}</span></td>
                                                <td width="25%"><a href="#" id="add_tax" ng-click="taxLabel()">Order Tax</a></td>
                                                <td class="text-right"><span id="ts_con">{{taxpercentage}}</span></td>
                                            </tr>
                                            <tr class="success">
                                                <td colspan="2" style="font-weight:bold;">
                                                    Total Payable
                                                    <a role="button" data-toggle="modal" data-target="#noteModal">
                                                        <i class="fa fa-comment"></i>
                                                    </a>
                                                </td>
                                                <td class="text-right" colspan="2" style="font-weight:bold;"><span id="total-payable">0</span></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div id="botbuttons" class="col-xs-12 text-center">
                                <div class="row">
                                    <div class="col-xs-4" style="padding: 0;">
                                        <div class="btn-group-vertical btn-block">
                                            <button type="button" ng-click="suspendHoldbtn()" class="btn btn-warning btn-block btn-flat"
                                                    id="suspend">
                                                Hold
                                            </button>
                                            <button type="button" class="btn btn-danger btn-block btn-flat"
                                                    id="reset" ng-click="cancleOrder()">
                                                Cancel
                                            </button>
                                        </div>

                                    </div>
                                    <div class="col-xs-4" style="padding: 0 5px;">
                                        <div class="btn-group-vertical btn-block">
                                            <button type="button" class="btn bg-purple btn-block btn-flat" id="print_order">Print Order</button>

                                            <button type="button" class="btn bg-navy btn-block btn-flat" id="print_bill">Print Bill</button>
                                        </div>
                                    </div>
                                    <div class="col-xs-4" style="padding: 0;">
                                        <button type="button" class="btn btn-success btn-block btn-flat" id="payment" ng-click="paymentmodel()" style="height:67px;">Payment</button>
                                    </div>
                                </div>

                            </div>

                            <div class="clearfix"></div>
                            <span id="hidesuspend"></span>
                            <input type="hidden" name="spos_note" value="" id="spos_note">

                            <div id="payment-con">
                                <input type="hidden" name="amount" id="amount_val" value="" />
                                <input type="hidden" name="balance_amount" id="balance_val" value="" />
                                <input type="hidden" name="paid_by" id="paid_by_val" value="cash" />
                                <input type="hidden" name="cc_no" id="cc_no_val" value="" />
                                <input type="hidden" name="paying_gift_card_no" id="paying_gift_card_no_val" value="" />
                                <input type="hidden" name="cc_holder" id="cc_holder_val" value="" />
                                <input type="hidden" name="cheque_no" id="cheque_no_val" value="" />
                                <input type="hidden" name="cc_month" id="cc_month_val" value="" />
                                <input type="hidden" name="cc_year" id="cc_year_val" value="" />
                                <input type="hidden" name="cc_type" id="cc_type_val" value="" />
                                <input type="hidden" name="cc_cvv2" id="cc_cvv2_val" value="" />
                                <input type="hidden" name="balance" id="balance_val" value="" />
                                <input type="hidden" name="payment_note" id="payment_note_val" value="" />
                            </div>
                            <input type="hidden" name="customer" id="customer" value="3" />
                            <input type="hidden" name="order_tax" id="tax_val" value="" />
                            <input type="hidden" name="order_discount" id="discount_val" value="" />
                            <input type="hidden" name="count" id="total_item" value="" />
                            <input type="hidden" name="did" id="is_delete" value="0" />
                            <input type="hidden" name="eid" id="is_delete" value="0" />
                            <input type="hidden" name="hold_ref" id="hold_ref" value="" />
                            <input type="hidden" name="total_items" id="total_items" value="0" />
                            <input type="hidden" name="total_quantity" id="total_quantity" value="0" />
                            <input type="submit" id="submit" value="Submit Sale" style="display: none;" />
                        </div>
                    </form>
                </div>

            </td>
            <td>
                <div class="contents" id="right-col" style="height: 528px;">
                    <div class="product-section">

                        <div class="productList" style="overflow-y:auto;max-height:500px;">
                            <div class="product-list" object-fit contain ng-repeat="item in filterProduct = (pager.Products | filter:searchText) " ng-click="add(item)">
                                <div ng-if="item.ImageName == null" class="p-imagebox">
                                    <img src="~/Areas/NeoErp.Pos/Images/images.jpg" id="nullimage" />
                                </div>
                                <div ng-if="item.ImageName != null" class="p-imagebox">
                                    <img src="{{item.ImageName}}" />
                                </div>
                                <div class="discription-box">
                                    <span class="price">{{item.ProductName}}</span>
                                </div>
                                <div style="display:none;">
                                    <span class="code">{{item.ProductCode}}</span>
                                </div>

                            </div>
                            <div class="text-center" ng-show="pagination">
                                <!-- pager -->
                                <ul ng-if="pager.pages.length" class="pagination">
                                    <li ng-class="{disabled:pager.currentPage === 1}">
                                        <a ng-click="setPage(1)">First</a>
                                    </li>
                                    <li ng-class="{disabled:pager.currentPage === 1}">
                                        <a ng-click="setPage(pager.currentPage - 1)">Previous</a>
                                    </li>
                                    <li ng-repeat="page in pager.pages" ng-class="{active:pager.currentPage === page}">
                                        <a ng-click="setPage(page)">{{page}}</a>
                                    </li>
                                    <li ng-class="{disabled:pager.currentPage === pager.totalPages}">
                                        <a ng-click="setPage(pager.currentPage + 1)">Next</a>
                                    </li>
                                    <li ng-class="{disabled:pager.currentPage === pager.totalPages}">
                                        <a ng-click="setPage(pager.totalPages)">Last</a>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <div class="product-nav">
                            <div class="btn-group btn-group-justified nonradius">
                                <div class="btn-group">
                                    <button style="z-index:10002;" class="btn btn-warning pos-tip btn-flat" type="button" id="previous"><i class="fa fa-chevron-left"></i></button>
                                </div>
                                <div class="btn-group">
                                    <button style="z-index:10003;" class="btn btn-success pos-tip btn-flat" type="button" id="sellGiftCard"><i class="fa fa-credit-card" id="addIcon"></i> Sell Gift Card</button>
                                </div>
                                <div class="btn-group">
                                    <button style="z-index:10004;" class="btn btn-warning pos-tip btn-flat" type="button" id="next"><i class="fa fa-chevron-right"></i></button>
                                </div>
                            </div>
                        </div>

                    </div>
                    @*<div id="item-list">
                            <div class="items">
                                <div>
                                    <div class="well">
                                        <div class="box">
                                            <div class="text-info">Breakfast</div>
                                            <hr>

                                            <button class="buttons btn btn-primary" ng-click="add(food.pizza)">Pizza</button>
                                            <button class="buttons btn btn-primary" ng-click="add(food.donut)">Donuts</button>
                                            <button class="buttons btn btn-primary" ng-click="add(food.tortilla)">Tortilla</button>
                                            <button class="buttons btn btn-primary" ng-click="add(food.burger)">Burger</button>
                                            <button class="buttons btn btn-success" ng-click="add(food.samosa)">Samosas</button>
                                        </div>

                                        <br></br>
                                        <div class="box">
                                            <div class="text-info">Bewerages</div>
                                            <hr>

                                            <button class="buttons btn btn-primary" ng-click="add(food.coldcoffee)">Cold Coffee</button>
                                            <button class="buttons btn btn-primary" ng-click="add(food.hotcoffee)">Hot Coffee</button>
                                            <button class="buttons btn btn-primary" ng-click="add(food.coke)">Coke</button>
                                            <button class="buttons btn btn-primary" ng-click="add(food.dietcoke)">Diet Coke</button>
                                            <button class="buttons btn btn-primary" ng-click="add(food.pepsi)">Pepsi</button>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>*@

                </div>
            </td>
        </tr>
    </table>


    @*<aside class="control-sidebar control-sidebar-dark" id="categories-list">
            <div class="tab-content">
                <div class="tab-pane active" id="control-sidebar-home-tab">
                    <input type="text" autocomplete="off" data-list=".control-sidebar-menu" name="filter-categories" id="filter-categories" class="form-control col-xs-12" placeholder="Type to filter categories" style="margin-bottom: 20px;">
                    <ul class="control-sidebar-menu">
                        <li>
                            <a href="#" class="category active" id="1">
                                <div class="menu-icon"><img src="http://spos.tecdiary.my/uploads/thumbs/no_image.png" alt="" class="img-thumbnail img-circle img-responsive"></div><div class="menu-info"><h4 class="control-sidebar-subheading">G01</h4><p>General</p></div>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </aside>*@
    <div class="control-sidebar-bg"></div>

    <div id="order_tbl" style="display:none;">
        <span id="order_span"></span>
        <table id="order-table" class="prT table table-striped table-condensed" style="width:100%;margin-bottom:0;"></table>
    </div>
    <div id="bill_tbl" style="display:none;">
        <span id="bill_span"></span>
        <table id="bill-table" width="100%" class="prT table table-striped table-condensed" style="width:100%;margin-bottom:0;"></table>
        <table id="bill-total-table" width="100%" class="prT table table-striped table-condensed" style="width:100%;margin-bottom:0;"></table>
    </div>

    <div id="ajaxCall"><i class="fa fa-spinner fa-pulse"></i></div>
    @*this for sales gift card*@
    <div class="modal" data-easein="flipYIn" id="gcModal" tabindex="-1" role="dialog" aria-labelledby="mModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="fa fa-times"></i></button>
                    <h4 class="modal-title" id="myModalLabel">Sell Gift Card</h4>
                </div>
                <div class="modal-body">
                    <p>Please fill in the information below</p>

                    <div class="alert alert-danger gcerror-con" style="display: none;">
                        <button data-dismiss="alert" class="close" type="button">×</button>
                        <span id="gcerror"></span>
                    </div>
                    <div class="form-group">
                        <label for="gccard_no">Card No</label> *
                        <div class="input-group">
                            <input type="text" name="gccard_no" value="" class="form-control" id="gccard_no" />
                            <div class="input-group-addon" style="padding-left: 10px; padding-right: 10px;"><a href="#" id="genNo"><i class="fa fa-cogs"></i></a></div>
                        </div>
                    </div>
                    <input type="hidden" name="gcname" value="Gift Card" id="gcname" />
                    <div class="form-group">
                        <label for="gcvalue">Value</label> *
                        <input type="text" name="gcvalue" value="" class="form-control" id="gcvalue" />
                    </div>
                    <div class="form-group">
                        <label for="gcprice">Price</label> *
                        <input type="text" name="gcprice" value="" class="form-control" id="gcprice" />
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Close</button>
                    <button type="button" id="addGiftCard" class="btn btn-primary">Sell Gift Card</button>
                </div>
            </div>
        </div>
    </div>
    @*this for end sales gift card*@
    <div class="modal" data-easein="flipYIn" id="dsModal" tabindex="-1" role="dialog" aria-labelledby="dsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="fa fa-times"></i></button>
                    <h4 class="modal-title" id="dsModalLabel">Discount (5 or 5%)</h4>
                </div>
                <div class="modal-body">
                    <input type='text' class='form-control input-sm kb-pad' id='get_ds' ng-model="disountper" value=''>

                    <label class="checkbox" for="apply_to_order">
                        <input type="radio" name="apply_to" value="order" id="apply_to_order" ng-model="discounttotalorder" />
                        Apply to order total
                    </label>
                    <label class="checkbox" for="apply_to_products">
                        <input type="radio" name="apply_to" value="products" id="apply_to_products" ng-model="discounttotalorder" />
                        Apply to all order items
                    </label>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default btn-sm pull-left" data-dismiss="modal">Close</button>
                    <button type="button" id="updateDiscount" ng-click="updateDiscount()" class="btn btn-primary btn-sm">Update</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" data-easein="flipYIn" id="tsModal" tabindex="-1" role="dialog" aria-labelledby="tsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="fa fa-times"></i></button>
                    <h4 class="modal-title" id="tsModalLabel">Tax (5 or 5%)</h4>
                </div>
                <div class="modal-body">
                    <input type='text' class='form-control input-sm kb-pad' id='get_ts' ng-model="taxpercentage" value=''>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default btn-sm pull-left" data-dismiss="modal">Close</button>
                    <button type="button" id="updateTax" ng-click="updateTaxpercentage()" class="btn btn-primary btn-sm">Update</button>
                </div>
            </div>
        </div>
    </div>
    @*this for add payment note*@
    <div class="modal" data-easein="flipYIn" id="noteModal" tabindex="-1" role="dialog" aria-labelledby="noteModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="fa fa-times"></i></button>
                    <h4 class="modal-title" id="noteModalLabel">Note</h4>
                </div>
                <div class="modal-body">
                    <textarea name="snote" id="snote" class="pa form-control kb-text" ng-model="snote"></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default btn-sm pull-left" data-dismiss="modal">Close</button>
                    <button type="button" id="update-note" ng-click="uploadnote()" class="btn btn-primary btn-sm">Update</button>
                </div>
            </div>
        </div>
    </div>
    @*this for end add payment note*@
    <div class="modal" data-easein="flipYIn" id="proModal" tabindex="-1" role="dialog" aria-labelledby="proModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header modal-primary">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="fa fa-times"></i></button>
                    <h4 class="modal-title" id="proModalLabel">
                        {{productname}}
                    </h4>
                </div>
                <div class="modal-body">
                    <table class="table table-bordered table-striped">
                        <tr>
                            <th style="width:25%;">Net Price</th>
                            <th style="width:25%;"><span id="net_price">{{order[productindex].totalPrice* order[productindex].orderedItemCnt}}</span></th>
                            <th style="width:25%;">Product Tax</th>
                            <th style="width:25%;"><span id="pro_tax"></span> <span id="pro_tax_method"></span></th>
                        </tr>
                    </table>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="nPrice">Unit Price</label>
                                <input type="text" class="form-control input-sm kb-pad" id="nPrice" ng-model="order[productindex].item.price" placeholder="New Price">
                            </div>
                            <div class="form-group">
                                <label for="nDiscount">Discount</label>
                                <input type="text" class="form-control input-sm kb-pad" id="nDiscount" onClick="this.select();" placeholder="Discount">
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label for="nQuantity">Quantity</label>
                                <input type="text" class="form-control input-sm kb-pad" id="nQuantity" ng-model="order[productindex].orderedItemCnt" placeholder="Current Quantity">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Close</button>
                    <button class="btn btn-success" id="editItem" ng-click="updateItem()">Update</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" data-easein="flipYIn" id="susModal" tabindex="-1" role="dialog" aria-labelledby="susModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="fa fa-times"></i></button>
                    <h4 class="modal-title" id="susModalLabel">Suspend Sale</h4>
                </div>
                <div class="modal-body">
                    <p>Type Reference Note</p>

                    <div class="form-group">
                        <label for="reference_note">Reference Note</label>
                        <input type="text" name="reference_note" value="" ng-model="suspendReferenceNote" class="form-control kb-text" id="reference_note" />
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default pull-left" data-dismiss="modal"> Close </button>
                    <button type="button" id="suspend_sale" ng-click="suspend()" class="btn btn-primary">Submit</button>
                </div>
            </div>
        </div>
    </div>



    <div class="modal" data-easein="flipYIn" id="saleModal" tabindex="-1" role="dialog" aria-labelledby="saleModalLabel" aria-hidden="true"></div>
    <div class="modal" data-easein="flipYIn" id="opModal" tabindex="-1" role="dialog" aria-labelledby="opModalLabel" aria-hidden="true"></div>
    @*this is for customer paymnet section*@
    <div class="modal" data-easein="flipYIn" id="payModal" tabindex="-1" role="dialog" aria-labelledby="payModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-success">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="fa fa-times"></i></button>
                    <h4 class="modal-title" id="payModalLabel">
                        Payment
                    </h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-xs-9">
                            <div class="font16">
                                <table class="table table-bordered table-condensed" style="margin-bottom: 0;">
                                    <tbody>
                                        <tr>
                                            <td width="25%" style="border-right-color: #FFF !important;">Total Items</td>
                                            <td width="25%" class="text-right"><span id="item_count">0.00</span></td>
                                            <td width="25%" style="border-right-color: #FFF !important;">Total Payable</td>
                                            <td width="25%" class="text-right"><span id="twt">0.00</span></td>
                                        </tr>
                                        <tr>
                                            <td style="border-right-color: #FFF !important;">Total Paying</td>
                                            <td class="text-right"><span id="total_paying">0.00</span></td>
                                            <td style="border-right-color: #FFF !important;">Balance</td>
                                            <td class="text-right"><span id="balance">0.00</span></td>
                                        </tr>
                                    </tbody>
                                </table>
                                <div class="clearfix"></div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12">
                                    <div class="form-group">
                                        <label for="note">Note</label>
                                        <textarea name="note" id="note" class="pa form-control kb-text"></textarea>
                                    </div>
                                </div>
                                <div class="col-xs-6">
                                    <div class="form-group">
                                        <label for="amount">Amount</label>
                                        <input name="amount[]" type="text" id="amount" class="pa form-control kb-pad amount" />
                                    </div>
                                </div>
                                <div class="col-xs-6">
                                    <div class="form-group">
                                        <label for="paid_by">Paying by</label>
                                        <select id="paid_by" class="form-control paid_by select2" style="width:100%;">
                                            <option value="cash">Cash</option>
                                            <option value="CC">Credit Card</option>
                                            <option value="Cheque">Cheque</option>
                                            <option value="gift_card">Gift Card</option>
                                            <option value="stripe">Stripe</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12">
                                    <div class="form-group gc" style="display: none;">
                                        <label for="gift_card_no">Gift Card No</label>									<input type="text" id="gift_card_no"
                                                                                                                                 class="pa form-control kb-pad gift_card_no gift_card_input" />

                                        <div id="gc_details"></div>
                                    </div>
                                    <div class="pcc" style="display:none;">
                                        <div class="form-group">
                                            <input type="text" id="swipe" class="form-control swipe swipe_input"
                                                   placeholder="Swipe card here then write security code manually" />
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-6">
                                                <div class="form-group">
                                                    <input type="text" id="pcc_no"
                                                           class="form-control kb-pad"
                                                           placeholder="Credit Card No" />
                                                </div>
                                            </div>
                                            <div class="col-xs-6">
                                                <div class="form-group">

                                                    <input type="text" id="pcc_holder"
                                                           class="form-control kb-text"
                                                           placeholder="Holder Name" />
                                                </div>
                                            </div>
                                            <div class="col-xs-3">
                                                <div class="form-group">
                                                    <select id="pcc_type"
                                                            class="form-control pcc_type select2"
                                                            placeholder="Card Type">
                                                        <option value="Visa">Visa</option>
                                                        <option value="MasterCard">
                                                            MasterCard
                                                        </option>
                                                        <option value="Amex">Amex</option>
                                                        <option value="Discover">
                                                            Discover
                                                        </option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-xs-3">
                                                <div class="form-group">
                                                    <input type="text" id="pcc_month"
                                                           class="form-control kb-pad"
                                                           placeholder="Month" />
                                                </div>
                                            </div>
                                            <div class="col-xs-3">
                                                <div class="form-group">

                                                    <input type="text" id="pcc_year"
                                                           class="form-control kb-pad"
                                                           placeholder="Year" />
                                                </div>
                                            </div>
                                            <div class="col-xs-3">
                                                <div class="form-group">

                                                    <input type="text" id="pcc_cvv2"
                                                           class="form-control kb-pad"
                                                           placeholder="CVV2" />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="pcheque" style="display:none;">
                                        <div class="form-group">
                                            <label for="cheque_no">Cheque No</label>									<input type="text" id="cheque_no"
                                                                                                                               class="form-control cheque_no  kb-text" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-3 text-center">
                            <!-- <span style="font-size: 1.2em; font-weight: bold;">Quick Cash</span> -->

                            <div class="btn-group btn-group-vertical" style="width:100%;">
                                <button type="button" class="btn btn-info btn-block quick-cash" id="quick-payable">
                                    0.00
                                </button>
                                <button type="button" class="btn btn-block btn-warning quick-cash">10</button><button type="button" class="btn btn-block btn-warning quick-cash">20</button><button type="button" class="btn btn-block btn-warning quick-cash">50</button><button type="button" class="btn btn-block btn-warning quick-cash">100</button><button type="button" class="btn btn-block btn-warning quick-cash">500</button>						<button type="button" class="btn btn-block btn-danger"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        id="clear-cash-notes">
                                    Clear
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default pull-left" data-dismiss="modal"> Close </button>
                    <button class="btn btn-primary" id="submit-sale">Submit</button>
                </div>
            </div>
        </div>
    </div>
    @*this is for End billPayment paymnet section*@
    @*/*this is for customer add*/*@
    <div class="modal" data-easein="flipYIn" id="customerModal" tabindex="-1" role="dialog" aria-labelledby="cModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">

                <div class="modal-header modal-primary">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="fa fa-remove"></i></button>
                    <h4 class="modal-title" id="cModalLabel">
                        Add Customer
                    </h4>
                </div>
                <form id="customer-form" name="newProfileForm" novalidate>
                    <div class="modal-body">
                        <div id="c-alert" class="alert alert-danger" style="display:none;"></div>
                        <div class="row">
                            <div class="col-xs-12">
                                <div class="form-group">
                                    <label class="control-label" for="code">
                                        Name <span style="color:red" ng-show="newProfileForm.name.$invalid">
                                            <span ng-show="newProfileForm.name.$error.required">is required.</span>
                                        </span>
                                    </label>
                                    <input type="text" ng-model="name" name="name" value="" class="form-control input-sm kb-text" id="cname" required />

                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-xs-6">
                                <div class="form-group">
                                    <label class="control-label" for="cemail">
                                        Email Address <span style="color:red" ng-show="newProfileForm.email.$invalid">
                                            <span ng-show="newProfileForm.email.$error.required">is required.</span>
                                            <span ng-show="newProfileForm.email.$error.email">is invalid.</span>
                                        </span>
                                    </label>
                                    <input type="email" ng-model="email" name="email" value="" class="form-control input-sm kb-text" id="cemail" required />

                                </div>
                            </div>
                            <div class="col-xs-6">
                                <div class="form-group">
                                    <label class="control-label" for="cemail">
                                        Phone<span style="color:red" ng-show="newProfileForm.Phone.$invalid">
                                            <span ng-show="newProfileForm.Phone.$error.required">is required.</span>
                                        </span>
                                    </label>
                                    <input type="text" ng-model="Phone" name="Phone" value="" class="form-control input-sm kb-pad" id="cphone" required />
                                </div>

                            </div>
                        </div>


                        <div class="row">
                            <div class="col-xs-6">
                                <div class="form-group">
                                    <label class="control-label" for="caddress">
                                        Address<span style="color:red" ng-show="newProfileForm.address.$invalid">
                                            <span ng-show="newProfileForm.address.$error.required">is required.</span>
                                        </span>
                                    </label>
                                    <input type="text" ng-model="address" name="address" value="" class="form-control input-sm kb-pad" id="caddress" required />

                                </div>

                            </div>
                            <div class="col-xs-6">
                                <div class="form-group">
                                    <label class="control-label" for="cmobile">
                                        Mobile<span style="color:red" ng-show="newProfileForm.Mobile.$invalid">
                                            <span ng-show="newProfileForm.Mobile.$error.required">is required.</span>
                                        </span>
                                    </label>
                                    <input type="text" ng-model="Mobile" name="Mobile" value="" class="form-control input-sm kb-pad" id="cmobile" required />
                                </div>

                            </div>
                        </div>

                    </div>
                    <div class="modal-footer" style="margin-top:0;">
                        <button type="button" class="btn btn-default pull-left" data-dismiss="modal"> Close </button>
                        <button type="submit" class="btn btn-primary" ng-click="addcustomer(newProfileForm.$valid)" id="add_customer"> Add Customer </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    @*/*this is for End customer add*/*@
    <div class="modal" data-easein="flipYIn" id="posModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"></div>
    <div class="modal" data-easein="flipYIn" id="posModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel2" aria-hidden="true"></div>
</div>



@section Scripts{
    <script src="~/Content/Kendo/kendoAllNew.js"></script>
    <script src="~/Content/MainTheme/assets/global/plugins/datatables/media/js/jquery.dataTables.min.js"></script>
    <script src="@Url.Content("~/areas/"+myAreaName+"/Content/perfect-scrollbar/js/perfect-scrollbar.jquery.min.js")"></script>
    <script src="@Url.Content("~/OldContent/Theme/plugins/fastclick/fastclick.min.js")"></script>
    <script src="@Url.Content("~/areas/"+myAreaName+"/Content/AllCommonjs.js")"></script>
    <script src="@Url.Content("~/Content/MainTheme/assets/global/plugins/icheck/icheck.min.js")"></script>
    <script src="http://localhost:22395/OldContent/Theme/plugins/input-mask/jquery.inputmask.js"></script>
    <script src="http://localhost:22395/OldContent/Theme/plugins/input-mask/jquery.inputmask.date.extensions.js"></script>
    <script src="@Url.Content("~/areas/"+myAreaName+"/Content/velocity/velocity.min.js")"></script>
    <script src="@Url.Content("~/areas/"+myAreaName+"/Content/velocity/velocity-ui-min.js")"></script>
    @*<script src="http://spos.tecdiary.my/themes/default/assets/dist/js/parse-track-data.js" type="text/javascript"></script>*@

    @*<script src="@Url.Content("~/areas/"+myAreaName+"/JS/posnew.js?v1=22w1")"></script>*@
    @*<script src="http://localhost:22397/Scripts/ngScript/script/autocomplete.js"></script>*@
    <script type="text/javascript" src="@Url.Content("~/areas/"+myAreaName+"/JS/App.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/areas/"+myAreaName+"/JS/posnew.js")"></script>
    <script src="~/Scripts/angular-messages.min.js"></script>

    <script type="text/javascript">

        var dateformat = 'D j M Y', timeformat = 'h:i A';
        var Settings = { "logo": "logo1.png", "site_name": "SimplePOS", "tel": "0105292122", "dateformat": "D j M Y", "timeformat": "h:i A", "language": "english", "theme": "default", "mmode": "0", "captcha": "0", "currency_prefix": "USD", "default_customer": "3", "default_tax_rate": "5%", "rows_per_page": "10", "total_rows": "30", "header": "<h2><strong>Simple POS<\/strong><\/h2>\r\n       My Shop Lot, Shopping Mall,<br>\r\n                                                                                              Post Code, City<br>", "footer": "Thank you for your business!\r\n<br>", "bsty": "3", "display_kb": "0", "default_category": "1", "default_discount": "0", "item_addition": "1", "barcode_symbology": "", "pro_limit": "10", "decimals": "2", "thousands_sep": ",", "decimals_sep": ".", "focus_add_item": "ALT+F1", "add_customer": "ALT+F2", "toggle_category_slider": "ALT+F10", "cancel_sale": "ALT+F5", "suspend_sale": "ALT+F6", "print_order": "ALT+F11", "print_bill": "ALT+F12", "finalize_sale": "ALT+F8", "today_sale": "Ctrl+F1", "open_hold_bills": "Ctrl+F2", "close_register": "ALT+F7", "java_applet": "0", "receipt_printer": "", "pos_printers": "", "cash_drawer_codes": "", "char_per_line": "42", "rounding": "1", "pin_code": "abdbeb4d8dbe30df8430a8394b7218ef", "purchase_code": null, "envato_username": null, "theme_style": "green", "after_sale_page": null, "overselling": "1", "multi_store": "1", "selected_language": "english" };
        var sid = false, username = 'admin', spositems = {};
        $(window).load(function () {

        });


        $(document).ready(function () {

            $("#customers").kendoAutoComplete({
                filter: "contains",
                dataTextField: "CustomerName",
                dataValueField: "CustomerCode",
                placeholder: "Select Customers...",
                height: 1000,
                minLength: 3,
                enforceMinLength: true,
                suggest: true,
                dataSource: {
                    dataType: "json",
                    serverFiltering: true,
                    transport: {
                        read: {
                            url: "/api/PosHome/GetCustomers"

                        },
                        parameterMap: function (data, action) {
                            var newParams = {
                                filter: data.filter.filters[0].value
                            };
                            console.log(newParams);
                            return newParams;
                        }

                    }
                },

            });


            //$(function () {
            //    //$('#customers').slimScroll({
            //    $('.pos #list-table-div, #customers, .productList ,#customers_listbox').slimScroll({

            //    });
            //});

            $(function () {
                //$('#customers').slimScroll({
                $('.pos #list-table-div, .productList ,#customers_listbox').slimScroll({

                });
            });
            //posScreen();

            //if(get('rmspos')) {
            //	if (get('spositems')) { remove('spositems'); }
            //	if (get('spos_discount')) { remove('spos_discount'); }
            //	if (get('spos_tax')) { remove('spos_tax'); }
            //	if (get('spos_note')) { remove('spos_note'); }
            //	if (get('spos_customer')) { remove('spos_customer'); }
            //	if (get('amount')) { remove('amount'); }
            //	remove('rmspos');
            //}
            //			if(! get('spos_discount')) {
            //		store('spos_discount', '0');
            //		$('#discount_val').val('0');
            //	}
            //	if(! get('spos_tax')) {
            //		store('spos_tax', '5%');
            //		$('#tax_val').val('5%');
            //	}

            //if (ots = get('spos_tax')) {
            //    $('#tax_val').val(ots);
            //}
            //if (ods = get('spos_discount')) {
            //    $('#discount_val').val(ods);
            //}
            //if(Settings.display_kb == 1) { display_keyboards(); }
            //nav_pointer();
            //loadItems();
            //read_card();
            //bootbox.addLocale('bl',{OK:'OK',CANCEL:'No',CONFIRM:'Yes'});
            //bootbox.setDefaults({closeButton:false,locale:"bl"});
        });



    </script>
    <script>
        (function () {
            'use strict';

            angular
                .module('app', [])
                .factory('PagerService', PagerService)
                .controller('ExampleController', ExampleController);

            function ExampleController(PagerService) {
                var vm = this;

                //vm.dummyItems = _.range(1, 151); // dummy array of items to be paged
                vm.pager = {};
                vm.setPage = setPage;

                initController();

                function initController() {
                    // initialize to page 1
                    vm.setPage(1);
                }

                function setPage(page) {
                    if (page < 1 || page > vm.pager.totalPages) {
                        return;
                    }

                    // get pager object from service
                    vm.pager = PagerService.GetPager($scope.Products.length, page);
                    debugger;
                    // get current page of items
                    //vm.items = vm.dummyItems.slice(vm.pager.startIndex, vm.pager.endIndex + 1);
                }
            }

            function PagerService() {
                // service definition
                var service = {};

                service.GetPager = GetPager;

                return service;

                // service implementation
                function GetPager(totalItems, currentPage, pageSize) {
                    // default to first page
                    currentPage = currentPage || 1;

                    // default page size is 10
                    pageSize = pageSize || 10;

                    // calculate total pages
                    var totalPages = Math.ceil(totalItems / pageSize);

                    var startPage, endPage;
                    if (totalPages <= 10) {
                        // less than 10 total pages so show all
                        startPage = 1;
                        endPage = totalPages;
                    } else {
                        // more than 10 total pages so calculate start and end pages
                        if (currentPage <= 6) {
                            startPage = 1;
                            endPage = 10;
                        } else if (currentPage + 4 >= totalPages) {
                            startPage = totalPages - 9;
                            endPage = totalPages;
                        } else {
                            startPage = currentPage - 5;
                            endPage = currentPage + 4;
                        }
                    }

                    // calculate start and end item indexes
                    var startIndex = (currentPage - 1) * pageSize;
                    var endIndex = Math.min(startIndex + pageSize - 1, totalItems - 1);

                    // create an array of pages to ng-repeat in the pager control
                    var pages = _.range(startPage, endPage + 1);

                    // return object with all pager properties required by the view
                    return {
                        totalItems: totalItems,
                        currentPage: currentPage,
                        pageSize: pageSize,
                        totalPages: totalPages,
                        startPage: startPage,
                        endPage: endPage,
                        startIndex: startIndex,
                        endIndex: endIndex,
                        pages: pages
                    };
                }
            }
        })();
    </script>
}
@*</body>
    </html>*@
<link href="~/Content/Pos/NeoPos.css" rel="stylesheet" />
@*<link href="~/OldContent/css/NimbleStyle.css" rel="stylesheet" />*@