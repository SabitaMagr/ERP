@{
    var myAreaName = string.Empty;
    object areaObj;
    Layout = null;
    if (ViewContext.RouteData.Values.TryGetValue("area", out areaObj))
    {
        myAreaName = areaObj.ToString();
    }
}
<style>
    legend {
        width: 9%;
    }

    .excelfile {
        font-size: 16px;
    }

    input[type="number"]::-webkit-outer-spin-button, input[type="number"]::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }

    .k-grid-content.k-auto-scrollable {
        height: 400px !important;
    }


    input[type="number"] {
        -moz-appearance: textfield;
    }

    .required {
        color: red;
        font-size: 11px !important;
    }

    i.fa.fa-file-image-o.image {
        margin: 1px;
    }

    .image-placeholder > img {
        display: inline;
        margin: 1px;
        height: 40px;
        width: 40px;
    }

    div#grid {
        height: 500px;
    }

    #PurchaseOrderForm .k-widget input {
        height: 16px !important;
        font-size: 11px;
    }

    .main .k-dropdown-wrap {
        height: 21px;
        font-size: 12px;
    }

    .k-list.k-reset {
        max-height: 200px !important;
        overflow: auto !important;
    }

    .form-group.image-placeholder > div {
        display: inline-block;
        float: left;
        width: 78px;
    }


    .k-item {
        font-size: 11px !important;
    }

    #historymodal .modal-dialog {
        width: 1017px !important;
        margin: 30px auto;
    }

    .contact-info-form {
        list-style-type: none;
        margin: 30px 0;
        padding: 0;
    }

        .contact-info-form li {
            margin: 10px 0;
        }

        .contact-info-form label {
            display: inline-block;
            width: 100px;
            text-align: right;
            font-weight: bold;
        }
    /*.k-icon{
          display:none;
      }*/
    .k-clear-value {
        display: none;
    }

    span.k-icon.k-i-loading {
        display: none;
    }

    .k-state-default > .k-select {
        /* border-color: #f9f6f6; */
        display: none;
    }

    .alert {
        margin-bottom: 0px;
        height: 21px;
        line-height: 20px;
        padding: 0px 15px;
    }

    .alert-dismissable .close, .alert-dismissible .close {
        right: -12px;
    }
</style>



<div ng-app="myApp" ngCloak>
    <div ng-controller="PurchaseOrderController" id="PurchaseOrderController">
        <div class="portlet light bordered main">
            <div class="portlet-title titleheading">
                <i class="fa fa-list-alt fontgreen"></i>
                <span class="caption-subject fontgreen bold uppercase">
                    Purchase Order
                </span>
                <span class="pull-right" ng-show="!showFormPanel">
                    <button type="button" id="addTarget" name="addTarget" ng-click="AddPurchaseOrder()" class="btn buttongreen btn-sm">[+] Add</button>
                </span>
                <span class="pull-right" ng-show="showFormPanel">
                    <button type="submit" id="EditContent" name="EditContent" ng-hide="ContentModal" ng-click="EditContent()" class="btn btn-default btn-sm" data-toggle="modal" data-target="#ContentModal"> Edit Content</button>
                    <button type="button" id="cancelpo" name="cancelpo" class="btn btn-default btn-sm" ng-click="cancelpo();">Cancel</button>
                    <button type="reset" id="saveandcontinue" name="saveandcontinue" class="btn btn-success btn-sm" ng-click="createpurchaseorder(PurchaseOrderForm.$valid,'saveandcontinue')">{{scAction}}</button>
                    <button type="submit" id="savePerformaInvoice" name="savePerformaInvoice" ng-click="createpurchaseorder(PurchaseOrderForm.$valid,'save')" class="btn buttongreen btn-sm">{{saveAction}}</button>
                </span>

            </div><!-- /portlet-title-->
            <div class="portlet-body">
                <div class="row">

                    <form id="PurchaseOrderForm" name="PurchaseOrderForm" ng-show="showFormPanel" novalidate>

                        <div class="col-sm-6 col-md-3">
                            <div class="form-group">
                                <label class="control-label">
                                    Order No (PO#)<span style="color:red" ng-show="PurchaseOrderForm.purchaseOrder.$invalid">
                                        <span ng-show="PurchaseOrderForm.purchaseOrder.$error.required">*</span>
                                    </span>
                                </label>
                                <input id="purchaseorderautocomplete" k-on-select="ItemsOnChange(kendoEvent)" ng-model="lc.purchaseOrder" name="purchaseOrder" kendo-auto-complete
                                       k-data-text-field="'ORDER_NO'"
                                       k-data-value-field="'ORDER_NO'"
                                       k-data-source="ipPurchaseOrder"
                                       k-min-length="1"
                                       k-value-primitive="true"
                                       k-placeholder="'Select Purchase Order...'"
                                       style="width: 100%" ng-disabled="onedit" required />

                            </div>
                        </div>
                        <input type="text" style="display:none" ng-model="lctrack" />
                        <input type="text" id="pocode" style="display:none" ng-model="pocode" />
                        <div class="col-sm-6 col-md-3">
                            <div class="form-group">
                                <label class="control-label">
                                    Beneficiary Name<span style="color:red" ng-show="PurchaseOrderForm.beneficiaryname.$invalid">
                                        <span ng-show="PurchaseOrderForm.beneficiaryname.$error.required">*</span>
                                    </span>
                                </label>
                                <select id="beneficiaryname" k-value-primitive="true" k-ng-model="lc.beneficiaryname" ng-model="lc.bnfname" name="beneficiaryname" kendo-drop-down-list style="width: 100%"
                                        k-options="bnflist" ng-disabled="!check_beneficiaryname" required></select>
                            </div>
                        </div>
                        <div class="col-sm-6 col-md-3">
                            <div class="form-group">
                                <label class="control-label">
                                    Week Number<span style="color:red" ng-show="PurchaseOrderForm.weeknumber.$invalid">
                                        <span ng-show="PurchaseOrderForm.weeknumber.$error.required">*</span>
                                    </span>
                                </label>
                                <select id="weeknumber" name="weeknumber" ng-model="lc.weeknumber" style="width: 100%; height:23px;" k-ng-model="lc.weeknumber" ng-disabled="!check_weeknumber">
                                    <option value="00">Select Week Number</option>
                                    @for (int i = 0; i <= 5; i++)
                                    {
                                        for (int j = 0; j <= 9; j++)
                                        {
                                            if (i == 0 && j == 0)
                                            {
                                                continue;
                                            }
                                            <option value=@i@j>W @i@j</option>
                                            if (i == 5 && j == 3)
                                            {
                                                break;
                                            }
                                        }
                                    }

                                </select>
                            </div>
                        </div>
                        <div class="col-sm-6 col-md-3">
                            <div class="form-group">
                                <label class="control-label">
                                    Order Date<small>(mm/dd/yyyy)</small><span style="color:red" ng-show="PurchaseOrderForm.orderdate.$invalid">
                                        <span ng-show="PurchaseOrderForm.orderdate.$error.required">*</span>
                                    </span>
                                </label>
                                <input type="text" id="orderdate" autocomplete="off" class="form-control maskdate" name="orderdate" ng-model="lc.orderdate" ng-disabled="!check_orderdate" required />
                            </div>
                        </div>

                        <div class="col-sm-6 col-md-3">
                            <div class="form-group">
                                <label class="control-label">
                                    Currency<span style="color:red" ng-show="PurchaseOrderForm.currency.$invalid">
                                        <span ng-show="PurchaseOrderForm.currency.$error.required">*</span>
                                    </span>
                                </label>
                                <select id="currency" k-value-primitive="true" k-ng-model="lc.currency" ng-model="lc.currencycode" name="currency" kendo-drop-down-list style="width: 100%"
                                        k-options="currencylist" ng-disabled="!check_currency" required></select>

                            </div>
                        </div>

                        <div ng-show="hideonedit" class="clearfix">
                            <div class="col-xs-12 col-sm-5 col-md-4">

                                <div class="pull-left">
                                    <input id="avatar" type="file" style="float:left" name="avatar" />
                                    <a href="javascript:void(0)" class="btn btn-xs buttongreen">
                                        <i class="fa fa-upload" id="uploadimages" ng-click="ImportExcel()" aria-hidden="true"></i>
                                    </a>

                                </div>

                            </div>
                            <div class="col-xs-12 col-sm-5 col-md-4">
                                <div class="alert alert-danger alert-dismissable">
                                    <label class="errormessage"></label>
                                </div>

                            </div>
                            <div class="col-xs-12 col-sm-2 col-md-4">
                                <a target="_self" href="~/Pictures/ExcelFormat.xlsx" data-toggle="tooltip" title="Download Excel Format.." download><i class='fa fa-file-excel-o excelfile fontgreen pull-right' /></a>
                            </div>
                        </div>
                        <div class="col-sm-12 col-md-12">
                            <div class="portlet-body slimscroll" ng-show="ItemsShow">
                                <div class="tblresponsive">
                                    <table class="table table-striped  table-hover ctable" id="items">
                                        <thead>
                                            <tr>
                                                <th width="5%">S.N.</th>
                                                <th>
                                                    Item Name <small style="opacity:0.6"></small>
                                                </th>
                                                <th width="5%">MU</th>
                                                <th width="8%">Quantity</th>
                                                <th width="8%">Rate</th>
                                                <th width="10%">Total</th>

                                                <th width="12%">HS Code<small style="opacity:0.6"></small></th>
                                                <th width="15%">Country of Origin<small style="opacity:0.6"></small></th>
                                                <th ng-show="additems" width="2%">
                                                    <a href="javascript:void(0)" ng:click="addIssue()" class="btn btn-xs buttongreen pull-right">
                                                        [<i class="fa fa-plus"></i>] Add
                                                    </a>
                                                </th>
                                            </tr>
                                        </thead>

                                        <tbody>
                                            <tr ng-show="noitems" style="font-size:10px;" ng-if="tablelist.length==0">
                                                <td colspan="9">No Items To Display..</td>
                                            </tr>
                                            <tr style="font-size:10px;" ng-repeat="items in itemlist">
                                                <td style="text-align:right;">{{$index +1}}</td>
                                                <td>
                                                    <input kendo-combo-box
                                                           id="items" class="items"
                                                           k-value-primitive="true"
                                                           k-placeholder="'Select Items'"
                                                           k-data-text-field="'ITEM_EDESC'"
                                                           k-data-value-field="'ITEM_CODE'"
                                                           k-filter="'contains'"
                                                           k-auto-bind="false"
                                                           k-min-length="3"
                                                           k-data-source="itemsDataSource"
                                                           ng-model="tablelist[$index].ITEM_EDESC"
                                                           k-on-select="onItemsChange(kendoEvent,$index)"
                                                           style="width: 100%" />
                                                </td>
                                                <td><input type="text" id="mucode" name="mucode" class="form-control input-sm" ng-model="tablelist[$index].MU_CODE" disabled /></td>

                                                <td><input type="number" min="0" id="quantity" name="quantity" ng-change="showtotal()" class="form-control input-sm" ng-model="tablelist[$index].QUANTITY" value={{items.CALC_QUANTITY | number : fractionSize}} /></td>
                                                <td><input type="number" min="0" id="value" name="value" class="form-control input-sm" ng-change="showtotal()" ng-model="tablelist[$index].AMOUNT" value={{items.CALC_UNIT_PRICE | number : fractionSize}} /></td>
                                                <td style="text-align:right"><label ng-model="tablelist[$index].TOTAL"> {{tablelist[$index].QUANTITY * tablelist[$index].AMOUNT | number:fractionSize}} </label> </td>
                                                <td style="width:15px;">

                                                    <select id="hscodedropdown" k-value-primitive="true" ng-model="tablelist[$index].HS_CODE" name="tablelist[$index].HS_CODE" kendo-drop-down-list style="width: 100%"
                                                            k-options="hscodeslist"></select>
                                                </td>
                                                <td style="width:30px;">
                                                    <select id="countrydropdown" k-value-primitive="true" ng-model="tablelist[$index].COUNTRY_OF_ORIGIN" name="tablelist[$index].COUNTRY_OF_ORIGIN" kendo-drop-down-list style="min-width: 100%"
                                                            k-options="countryslist"></select>
                                                </td>
                                                <td ng-show="additems"></td>
                                            </tr>

                                            <tr style="font-size:10px;" ng-hide="hidefirstrow" ng:repeat="issue in issues">
                                                <td style="text-align:right;">{{$index +1+issue.sn}}</td>
                                                <td>
                                                    <select kendo-combo-box
                                                            id="items"
                                                            k-placeholder="'Select Items'"
                                                            k-data-text-field="'ITEM_EDESC'"
                                                            k-data-value-field="'ITEM_CODE'"
                                                            k-filter="'contains'"
                                                            k-auto-bind="true"
                                                            k-min-length="3"
                                                            k-data-source="itemsDataSource"
                                                            ng-model="tablelist[$index +itemlist.length].ITEM_CODE"
                                                            k-on-change="onItemsChange(kendoEvent,$index+ itemlist.length)"
                                                            style="width: 100%"></select>
                                                </td>
                                                <td><input type="text" id="mucode" name="mucode" class="form-control input-sm" ng-model="tablelist[$index+ itemlist.length].MU_CODE" disabled /></td>
                                                <td><input type="number" min="0" id="quantity" name="quantity" ng-change="showtotal()" class="form-control input-sm" ng-model="tablelist[$index+ itemlist.length].QUANTITY" value="0" /></td>
                                                <td><input type="number" min="0" id="value" name="value" ng-change="showtotal()" class="form-control input-sm" ng-model="tablelist[$index + itemlist.length].AMOUNT" value="0" /></td>
                                                <td style="text-align:right"><label ng-model="tablelist[$index+ itemlist.length].TOTAL"> {{tablelist[$index+ itemlist.length].QUANTITY * tablelist[$index+ itemlist.length].AMOUNT | number:fractionSize}} </label> </td>

                                                <td>
                                                    <select id="hscodedropdown" k-value-primitive="true" k-ng-model="tablelist[$index+ itemlist.length].HS_CODE" name="tablelist[$index].HS_CODE" kendo-drop-down-list style="width: 100%"
                                                            k-options="hscodeslist"></select>
                                                </td>
                                                <td>
                                                    <select id="countrydropdown" k-value-primitive="true" k-ng-model="tablelist[$index+ itemlist.length].COUNTRY_OF_ORIGIN" name="tablelist[$index].COUNTRY_OF_ORIGIN" kendo-drop-down-list style="min-width: 100%"
                                                            k-options="countryslist"></select>
                                                </td>
                                                <td>
                                                    [<a href="javascript:void(0)" ng:click="removeIssue($index+ itemlist.length)">X</a>]
                                                </td>

                                            </tr>
                                            <tr>
                                                <td></td>
                                                <td><b>Grand Total</b></td>
                                                <td></td>
                                                <td><b class="pull-right">{{Total_Quantity | number}}</b>  </td>
                                                <td>@*<b class="pull-right">{{Rate | number}}</b>*@ </td>
                                                <td><b class="pull-right">{{Total_Amount | number}} </b></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                        </tbody>
                                    </table>

                                </div>


                            </div>
                        </div>


                        <div class="col-sm-6 col-md-3">
                            <div class="form-group">
                                <label class="control-label">
                                    Terms<span style="color:red" ng-show="PurchaseOrderForm.incoterms.$invalid">
                                        <span ng-show="PurchaseOrderForm.incoterms.$error.required">*</span>
                                    </span>
                                </label>
                                <select id="incoterms" k-value-primitive="true" k-ng-model="lc.terms" ng-model="lc.incoterms" name="incoterms" kendo-drop-down-list style="width: 100%"
                                        k-options="incoTerms" ng-disabled="!check_incoterms" required></select>

                            </div>
                        </div>
                        <div class="col-sm-6 col-md-3">
                            <div class="form-group">
                                <label class="control-label">
                                    Delivery Place Type<span style="color:red" ng-show="PurchaseOrderForm.deliveryplacetype.$invalid">
                                        <span ng-show="PurchaseOrderForm.deliveryplacetype.$error.required">*</span>
                                    </span>
                                </label>
                                <select id="deliveryplacetype" name="deliveryplacetype" k-ng-model="lc.deliveryplacetype" ng-model="lc.dplacetype" k-value-primitive="true" kendo-drop-down-list style="width: 100%"
                                        k-options="deliveryPlaceType" ng-disabled="!check_deliveryplacetype" required></select>

                            </div>
                        </div>
                        <div class="col-sm-6 col-md-3">
                            <div class="form-group">
                                <label class="control-label">
                                    Payment Terms<span style="color:red" ng-show="PurchaseOrderForm.pterms.$invalid">
                                        <span ng-show="PurchaseOrderForm.pterms.$error.required">*</span>
                                    </span>
                                </label>
                                <select id="pterms" k-value-primitive="true" k-ng-model="lc.pterms" ng-model="lc.paymentterms" name="pterms" kendo-drop-down-list style="width: 100%"
                                        k-options="pTerms" k-on-change="LoadtermsDay()" ng-disabled="!check_paymentterms" required></select>

                            </div>
                        </div>
                        <div class="col-sm-6 col-md-3">
                            <div class="form-group">
                                <label class="control-label">Credit Days</label>
                                <input limit-to="4" type="number" min="0" max="9999" id="creditdays" name="creditdays" ng-disabled="!check_creditdays" ng-model="lc.creditdays" oninput="validity.valid||(value='');" class="form-control input-sm" />
                            </div>
                        </div>



                        <div class="col-sm-6 col-md-3">
                            <div class="form-group">
                                <label class="control-label">
                                    Manual No
                                </label>
                                <input type="text" id="manualno" name="manualno" ng-model="lc.manualno" class="form-control input-sm" ng-disabled="!check_manualno" />

                            </div>
                        </div>

                        <div class="col-sm-6 col-md-3">
                            <div class="form-group">
                                <label class="control-label">
                                    Delivery Place
                                </label>
                                <input type="text" id="deliveryplace" name="deliveryplace" ng-model="lc.deliveryplace" class="form-control input-sm" ng-disabled="!check_deliveryplace" />

                            </div>
                        </div>
                        <div class="col-sm-6 col-md-3">
                            <div class="form-group">
                                <label class="control-label">
                                    Applicant Name
                                </label>
                                <input type="text" id="appname" name="appname" ng-model="lc.appname" class="form-control input-sm" ng-disabled="!check_appname" />

                            </div>
                        </div>
                        <div class="col-sm-6 col-md-3">
                            <div class="form-group">
                                <label class="control-label">
                                    Applicant Address
                                </label>
                                <input type="text" id="appaddress" name="appaddress" ng-model="lc.appaddress" class="form-control input-sm" ng-disabled="!check_appaddress" />

                            </div>
                        </div>
                        <div class="col-sm-6 col-md-3">
                            <div class="form-group">
                                <label class="control-label">
                                    Bill Company Name
                                </label>
                                <input type="text" id="billcompname" name="billcompname" ng-model="lc.billcompname" class="form-control input-sm" ng-disabled="!check_billcompname" />

                            </div>
                        </div>
                        <div class="col-sm-6 col-md-3">
                            <div class="form-group">
                                <label class="control-label">
                                    Bill Company Address
                                </label>
                                <input type="text" id="billcompadd" name="billcompadd" ng-model="lc.billcompadd" class="form-control input-sm" ng-disabled="!check_billcompadd" />

                            </div>
                        </div>
                        <div class="col-sm-6 col-md-3">
                            <div class="form-group">
                                <label class="control-label">
                                    Bill Company Phone
                                    <span style="color:red" class="error" ng-show="PurchaseOrderForm.billcompPhone.$error.pattern">Include number, + , - </span>
                                    <span style="color:red" ng-show="PurchaseOrderForm.billcompPhone.$error.maxlength">Value length exceeded.</span>
                                </label>
                                <input type="text" id="billcompPhone" name="billcompPhone" ng-model="lc.billcompPhone" class="form-control input-sm" ng-pattern="phoneNumber" ng-maxlength="15" ng-disabled="!check_billcompPhone" />


                            </div>
                        </div>
                        <div class="col-sm-6 col-md-3">
                            <div class="form-group">
                                <label class="control-label">
                                    Ship Company Name
                                </label>
                                <input type="text" id="shipcompname" name="shipcompname" ng-model="lc.shipcompname" class="form-control input-sm" ng-disabled="!check_shipcompname" />

                            </div>
                        </div>
                        <div class="col-sm-6 col-md-3">
                            <div class="form-group">
                                <label class="control-label">
                                    Ship Company Address
                                </label>
                                <input type="text" id="shipcompadd" name="shipcompadd" ng-model="lc.shipcompadd" class="form-control input-sm" ng-disabled="!shipcompadd" />

                            </div>
                        </div>
                        <div class="col-sm-6 col-md-3">
                            <div class="form-group">
                                <label class="control-label">
                                    Ship Company Phone<span style="color:red" class="error" ng-show="PurchaseOrderForm.shipcompPhone.$error.pattern"> Include number, + , - </span>
                                    <span style="color:red" ng-show="PurchaseOrderForm.shipcompPhone.$error.maxlength">Value length exceeded.</span>
                                </label>

                                <input type="text" id="shipcompPhone" name="shipcompPhone" ng-model="lc.shipcompPhone" class="form-control input-sm" ng-pattern="phoneNumber" ng-maxlength="15" ng-disabled="!check_shipcompPhone" />

                            </div>
                        </div>
                        <div class="col-sm-6 col-md-3">
                            <div class="form-group">
                                <label class="control-label">
                                    Contact Name
                                </label>
                                <input type="text" id="contactname" name="contactname" ng-model="lc.contactname" class="form-control input-sm" ng-disabled="!check_contactname" />

                            </div>
                        </div>
                        <div class="col-sm-6 col-md-3">
                            <div class="form-group">
                                <label class="control-label">
                                    Contact Email<span style="color:red" ng-show="PurchaseOrderForm.contactemail.$dirty && PurchaseOrderForm.contactemail.$invalid">

                                        <span ng-show="PurchaseOrderForm.contactemail.$error.email">Invalid email address.</span>
                                    </span>
                                </label>
                                <input type="email" id="contactemail" name="contactemail" ng-model="lc.contactemail" class="form-control input-sm" ng-disabled="!check_contactemail" />

                            </div>
                        </div>
                        <div class="col-sm-6 col-md-3">
                            <div class="form-group">
                                <label class="control-label">
                                    Contact Phone<span style="color:red" class="error" ng-show="PurchaseOrderForm.contactphone.$error.pattern"> Include number, + , - </span>
                                    <span style="color:red" ng-show="PurchaseOrderForm.contactphone.$error.maxlength">Value length exceeded.</span>

                                </label>
                                <input type="text" id="contactphone" name="contactphone" ng-model="lc.contactphone" class="form-control input-sm" ng-pattern="phoneNumber" ng-maxlength="15" ng-disabled="!check_contactphone" />

                            </div>
                        </div>
                        <div class="col-sm-6 col-md-3">
                            <div class="form-group">
                                <label class="control-label">Validity Date<small>(mm/dd/yyyy)</small></label>
                                <input type="text" id="validitydate" name="validitydate" autocomplete="off" class="form-control maskdate" ng-model="lc.validitydate" ng-disabled="!check_validitydate" />

                            </div>
                        </div>


                        <div class="col-sm-6 col-md-3">
                            <div class="form-group">
                                <label class="control-label">
                                    Lead Time @*<span style="color:red" ng-show="PurchaseOrderForm.DayNumber.$invalid ">
                                            <span ng-show="PurchaseOrderForm.DayNumber.$error.required ">*</span>
                                        </span>*@
                                </label>
                                <div class="row">
                                    <div class="col-sm-4 col-md-4 daynumber">
                                        <input type="number" id="DayNumber" name="DayNumber" min="0" class="form-control" ng-model="lc.daynumber" ng-disabled="!check_daynumber" />
                                    </div>
                                    <div class="col-sm-8 col-md-8">
                                        <select id="CalenderDays" name="CalenderDay" ng-model="lc.calenderdays" kendo-drop-down-list style="width: 400px"
                                                k-options="CalenderDays" ng-disabled="!check_calenderdays"></select>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-6 col-md-3">
                            <div class="form-group">
                                <label class="control-label">
                                    Remarks
                                </label>
                                <input type="text" id="Remarks" name="remarks" class="form-control" ng-model="lc.remarks" ng-disabled="!check_remarks" />

                            </div>
                        </div>
                        <div class="col-sm-3 col-md-3">
                            <div class="form-group">
                                <label class="control-label block">Uploads</label>
                                <button type="button" data-toggle="modal" data-target="#itemimages" class="btn buttongreen cbtn upload">
                                    <i class="fa fa-upload iconupload" aria-hidden="true"></i>
                                    Upload
                                </button>


                            </div>
                        </div>
                        <div class="col-sm-6 col-md-6">
                            <label class="control-label block"></label>
                            <div class="form-group image-placeholder">

                            </div>
                        </div>

                    </form>
                </div>
                <div class="clearfix">
                </div>

                <kendo-grid id="grid" options="mainGridOptions" k-rebind="mainGridOptions">
                    <div k-detail-template>
                        <kendo-tabstrip>
                            <ul>
                                <li class="k-state-active">Details</li>
                                <li>Items</li>
                            </ul>
                            <div>
                                <div class="details">
                                    <table class="table-striped table-hover">
                                        <tr>
                                            <td class="details-label">Lc Track No:</td>
                                            <td class="details-value">{{dataItem.LC_TRACK_NO}}</td>
                                            <td class="details-label">Order No:</td>
                                            <td class="details-value">{{dataItem.ORDER_NO}}</td>
                                            <td class="details-label">Order Date:</td>
                                            <td class="details-value">{{dataItem.ORDER_DATE | date:"MM/dd/yyyy"}}</td>
                                        </tr>
                                        <tr>
                                            <td class="details-label">Beneficiary Name:</td>
                                            <td class="details-value">{{dataItem.BNF_EDESC}}</td>
                                            <td class="details-label">Ship Company Name:</td>
                                            <td class="details-value">{{dataItem.SHIP_COMPANY_NAME}}</td>
                                            <td class="details-label">Applicant Name:</td>
                                            <td class="details-value">{{dataItem.APP_NAME}}</td>
                                        </tr>
                                        <tr>
                                            <td class="details-label">Billing Company Name:</td>
                                            <td class="details-value">{{dataItem.BILL_COMPANY_NAME}}</td>
                                            <td class="details-label">Contact Name:</td>
                                            <td class="details-value">{{dataItem.CONTACT_NAME}}</td>
                                            <td class="details-label">Currency Code:</td>
                                            <td class="details-value">{{dataItem.CURRENCY_CODE}}</td>
                                        </tr>
                                        <tr>
                                            <td class="details-label">Credit Days:</td>
                                            <td class="details-value">{{dataItem.CREDIT_DAYS}}</td>
                                            <td class="details-label">Terms Name:</td>
                                            <td class="details-value">{{dataItem.TERMS_EDESC}}</td>
                                            <td class="details-label">Validity Date:</td>
                                            <td class="details-value">{{dataItem.VALIDITY_DATE | date:"MM/dd/yyyy"}}</td>
                                        </tr>
                                        <tr>
                                            <td class="details-label">Ship Company Address:</td>
                                            <td class="details-value">{{dataItem.SHIP_COMPANY_ADD}}</td>
                                            <td class="details-label">Applicant Address:</td>
                                            <td class="details-value">{{dataItem.APP_ADDRESS}}</td>
                                            <td class="details-label">Billing Company Address:</td>
                                            <td class="details-value">{{dataItem.BILL_COMPANY_ADD}}</td>
                                        </tr>
                                        <tr>
                                            <td class="details-label">Contact Phone:</td>
                                            <td class="details-value">{{dataItem.CONTACT_PHONE}}</td>
                                            <td class="details-label">Lead Time:</td>
                                            <td class="details-value">{{dataItem.LEAD_TIME}}</td>

                                            <td class="details-label">Delivery Place Type:</td>
                                            <td class="details-value">{{dataItem.DELIVERY_PLACE}}</td>
                                        </tr>
                                        <tr>
                                            <td class="details-label">Payment Terms Name:</td>
                                            <td class="details-value">{{dataItem.PTERMS_EDESC}}</td>
                                            <td class="details-label">Transshipment:</td>
                                            <td class="details-value">{{dataItem.TRANSSHIPMENT}}</td>
                                            <td class="details-label">Ship Company Phone:</td>
                                            <td class="details-value">{{dataItem.SHIP_COMPANY_PHONE}}</td>
                                        </tr>
                                        <tr>
                                            <td class="details-label">Contact Email:</td>
                                            <td class="details-value">{{dataItem.CONTACT_EMAIL}}</td>
                                            <td class="details-label">Remarks:</td>
                                            <td class="details-value">{{dataItem.REMARKS}}</td>

                                        </tr>
                                    </table>

                                </div>
                            </div>
                            <div>
                                <div class="itemgrid" kendo-grid k-options="itemGridOptions(dataItem)"></div>
                            </div>




                        </kendo-tabstrip>
                    </div>
                </kendo-grid>
                @Html.Partial("~/Views/Shared/Controls/_GridToolbar.cshtml")
                <div class="modal fade" id="ContentModal" role="dialog">
                    <div class="modal-dialog inputcontent">

                        <!-- Modal content-->
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                <h4 class="modal-title">Enable/Disable</h4>
                            </div>
                            <div class="modal-body">
                                <!------------------------------------------For All Enable/Disable------------------------------------>
                                <div class="row">
                                    <div class="col-md-4">
                                        <input type="checkbox" ng-change='AllcheckboxEnableDisable()' id="Allcheckbox" ng-model="Allcheckbox" />
                                        All
                                    </div>
                                </div>
                                <!------------------------------------------For Plan shippment-------------------------------------->
                                <div>

                                    <input type="checkbox" ng-model="check_beneficiaryname" class="enabledisable" />
                                    Beneficiary Name  <br>
                                    <input type="checkbox" ng-model="check_weeknumber" class="enabledisable" />
                                    Week Number  <br>

                                    <input type="checkbox" ng-model="check_orderdate" class="enabledisable" />
                                    Order Date <br>
                                    <input type="checkbox" ng-model="check_currency" class="enabledisable" />
                                    Currency<br>

                                    <input type="checkbox" ng-model="check_incoterms" class="enabledisable" />
                                    Terms <br>


                                    <input type="checkbox" ng-model="check_deliveryplacetype" class="enabledisable" />
                                    Delivery Place Type <br>

                                    <input type="checkbox" ng-model="check_paymentterms" class="enabledisable" />
                                    Payment Terms  <br>

                                    <input type="checkbox" ng-model="check_creditdays" class="enabledisable" />
                                    Credit Days<br>

                                    <input type="checkbox" ng-model="check_manualno" class="enabledisable" />
                                    Manual No <br>

                                    <input type="checkbox" ng-model="check_deliveryplace" class="enabledisable" />
                                    Delivery Place<br>


                                    <input type="checkbox" ng-model="check_appname" class="enabledisable" />
                                    Applicant Name  <br>

                                    <input type="checkbox" ng-model="check_appaddress" class="enabledisable" />
                                    Applicant Address <br>

                                    <input type="checkbox" ng-model="check_billcompname" class="enabledisable" />
                                    Bill Company Name <br>

                                    <input type="checkbox" ng-model="check_billcompadd" class="enabledisable" />
                                    Bill Company Address <br>

                                    <input type="checkbox" ng-model="check_billcompPhone" class="enabledisable" />
                                    Bill Company Phone  <br>

                                    <input type="checkbox" ng-model="check_shipcompname" class="enabledisable" />
                                    Ship Company Name<br>
                                    <input type="checkbox" ng-model="shipcompadd" class="enabledisable" />
                                    Ship Company Address <br>

                                    <input type="checkbox" ng-model="check_shipcompPhone" class="enabledisable" />
                                    Ship Company Phone<br>


                                    <input type="checkbox" ng-model="check_contactname" class="enabledisable" />
                                    Contact Name <br>

                                    <input type="checkbox" ng-model="check_contactemail" class="enabledisable" />
                                    Contact Email <br>

                                    <input type="checkbox" ng-model="check_contactphone" class="enabledisable" />
                                    Contact Phone  <br>

                                    <input type="checkbox" ng-model="check_validitydate" class="enabledisable" />
                                    Validity Date<br>
                                    <input type="checkbox" ng-model="check_daynumber" class="enabledisable" />
                                    Lead Time <br>
                                    <input type="checkbox" ng-model="check_calenderdays" class="enabledisable" />
                                    Days <br>

                                    <input type="checkbox" ng-model="check_remarks" class="enabledisable" />
                                    Remarks<br>

                                </div>

                                <div class="modal-footer">
                                    <button type="button" class="btn btn-primary" data-dismiss="modal">Ok</button>
                                </div>
                            </div>

                        </div>
                    </div>
                    <!--container end -->
                </div>

                <div class="modal fade" id="FilterModal" role="dialog">
                    <div class="modal-dialog">

                        <!-- Filter Modal content-->
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                <h4 class="modal-title">Filter</h4>
                            </div>
                            <div class="modal-body">
                                <div class="row">
                                    <div class="col-sm-12 col-md-12">
                                        <div class="form-group">
                                            <label class="control-label">
                                                Order No (PO#)
                                            </label>
                                            <input id="filterDatapurchaseorder" ng-model="filterData.purchaseOrder" name="purchaseOrder" kendo-auto-complete
                                                   k-data-text-field="'ORDER_NO'"
                                                   k-data-value-field="'ORDER_NO'"
                                                   k-data-source="ipPurchaseOrderfilter"
                                                   k-min-length="1"
                                                   k-value-primitive="true"
                                                   k-placeholder="'Select Purchase Order...'"
                                                   style="width: 100%" required />

                                        </div>
                                    </div>

                                    <div class="col-sm-12 col-md-12">
                                        <div class="form-group">
                                            <label class="control-label">
                                                Beneficiary Name
                                            </label>
                                            <select id="filterDatabeneficiaryname" k-value-primitive="true" k-ng-model="filter.beneficiaryname" ng-model="filterData.beneficiaryname" name="beneficiaryname" kendo-drop-down-list style="width: 100%"
                                                    k-options="bnflist"></select>
                                        </div>
                                    </div>
                                    <div class="col-sm-12 col-md-12">
                                        <div class="form-group">
                                            <label class="control-label">
                                                Order Date<small>(mm/dd/yyyy)</small>
                                            </label>
                                            <input type="text" id="filterDataorderdate" autocomplete="off" class="form-control maskdate" name="filterdataorderdate" ng-model="filterData.orderdate" required />
                                        </div>
                                    </div>
                                </div>

                                <div class="modal-footer">
                                    <button type="submit" id="savePerformaInvoice" name="savePerformaInvoice" ng-click="Filter()" class="btn buttongreen btn-sm">Filter</button>
                                    <button type="button" class="btn btn-sm" ng-click="CancelFilter()" data-dismiss="modal">Cancel</button>
                                </div>
                            </div>

                        </div>
                    </div>

                    <div class="modal fade" id="itemimages" tabindex="-1" role="dialog" aria-labelledby="filterModalLabel">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <div class="form-inline">

                                    </div>
                                    <h4 class="modal-title">Image Upload</h4>
                                </div>

                                <form action="~/LOC/PurchaseOrder/PurchaseOrderUpload" method="post" enctype="multipart/form-data" class="dropzone form-horizontal form-bordered" id="myAwesomeDropzone">
                                    <div class="form-group form-actions">
                                        <div class="col-md-9 col-md-offset-4">
                                            <input type="text" style="display:none" ng-model="purchaseorder" name="purchaseorder" id="purchaseorder" />
                                            <input type="text" style="display:none" ng-model="lctrackno" name="lctrackno" id="lctrackno" />
                                        </div>
                                    </div>
                                </form>

                                <div class="modal-footer">
                                    <button type="button" class="btn btn-success pull-right" data-dismiss="modal" aria-hidden="true">Ok</button>

                                </div>
                            </div>


                        </div>
                    </div>

                    <div class="modal fade" id="historymodal" tabindex="-1" role="dialog" aria-labelledby="filterModalLabel">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <div class="form-inline">

                                    </div>
                                    <h4 class="modal-title">Document History</h4>
                                </div>
                                <div id="example" ng-app="KendoDemos">
                                    <div class="demo-section k-content">

                                        <div kendo-tab-strip k-content-urls="[ null, null]">
                                            <!-- tab list -->
                                            <ul>
                                                <li class="k-state-active">Items History</li>

                                                <li>Document History</li>
                                            </ul>

                                            <div style="padding: 1em">
                                                <div class="historyitemgrid" k-rebind="historyitemGridOptions" kendo-grid k-options="historyitemGridOptions(dataItem)"></div>
                                            </div>


                                            <div style="padding: 1em">
                                                <div class="historydocumentgrid" k-rebind="historydocumentGridOptions" kendo-grid k-options="historydocumentGridOptions(dataItem)"></div>
                                            </div>
                                        </div>

                                    </div>
                                </div>

                                <div class="modal-footer">
                                    <button type="button" class="btn btn-success pull-right" data-dismiss="modal" aria-hidden="true">Ok</button>

                                </div>
                            </div>


                        </div>
                    </div>


                </div>
            </div><!--/portlet-body-->
        </div><!-- /portlet-->
    </div>



    <script>
        $(document).ready(function () {
            $('.alert').css({ display: 'none' });

        })
        $('.nav-tabs a').on('click', function (e) {

            e.preventDefault();

        });

        myDropzone = new Dropzone('#myAwesomeDropzone', { // Make the whole body a dropzone
            thumbnailWidth: 200,
            thumbnailHeight: 75,
            autoDiscover: false,
            autoProcessQueue: false,
            addRemoveLinks: true,
            paramName: "inputFiles",
            uploadMultiple: true,
            parallelUploads: 100,
            maxFiles: 100,
            maxFileSize: 10,
        });

        myDropzone.on("success", function (file, responseText) {

            if (responseText.status == "Error") {

                displayPopupNotification("File upload does not success. Please update.", "error");
            }
            else {
                RefreshGrid();
                this.removeFile(file);

            }


        });


        function RemoveImage(el) {

            var $this = $(this);
            bootbox.confirm("Are you sure you want to delete?", function (result) {

                if (result) {

                    var imageremovedetails = {
                        Path: $(el).data("src"),
                        LocCode: $('#pocode').val(),
                    };

                    $.ajax({
                        url: "/api/PurchaseOrder/RemovePoImage",
                        type: "POST",
                        dataType: "json",
                        data: imageremovedetails,
                        success: function (result) {
                            RefreshGrid();
                            el.closest('div').remove();
                            displayPopupNotification("Succesfully Removed File.", "Success");
                        },
                        error: function (result) {


                        }
                    });

                }
            });

        }

        function RefreshGrid() {
            $("#grid").data("kendoGrid").dataSource.read();
        }

        $('#uploadimages').click(function () {

            if (window.FormData !== undefined) {
                showloader();
                var file_data = $("#avatar").prop("files")[0];   // Getting the properties of file from file field
                var form_data = new FormData();                  // Creating object of FormData class
                form_data.append("file", file_data)

                $.ajax({
                    url: '/ProformaInvoice/Import',
                    type: "POST",
                    contentType: false,
                    processData: false,
                    data: form_data,
                    success: function (result) {

                        if (result == "empty") {
                            $('.alert').css({ display: 'block' });
                            $('.errormessage').html("Please select a excel file.");
                            hideloader();
                        }
                        else if (result == "fileincorrect") {
                            $('.alert').css({ display: 'block' });
                            $('.errormessage').html("Other inputs rather than excel file is invalid.");
                            hideloader();
                        }
                        else if (result == "formaterror") {
                            $('.alert').css({ display: 'block' });
                            $('.errormessage').html("Please manage the excel file as per giver format.");
                            hideloader();
                        }
                        else if (result == "sheetmismatch") {
                            $('.alert').css({ display: 'block' });
                            $('.errormessage').html("Please change the Sheet Name to Sheet1.");
                            hideloader();
                        }
                        else if (result[0].ITEM_CODE != null && result[0].ITEM_CODE != undefined && result[0].ITEM_CODE != "") {
                            ;
                            angular.element('#PurchaseOrderController').scope().BindPurchaseOrderDataFromExcelFile(result);
                            $('.alert').css({ display: 'none' });
                            $('#avatar').val("");
                            hideloader();
                        }
                        else {

                            $('.alert').css({ display: 'block' });
                            displayPopupNotification(result, "error");
                            hideloader();
                        }
                    },
                    error: function (err) {

                        displayPopupNotification(err.statusText, "error");
                        hideloader();
                    }
                });
            } else {
                alert("FormData is not supported.");
            }
        });


    </script>
