@using NeoErp.Core;
@using NeoErp.Core.Infrastructure;
@{
    var workingContent = EngineContext.Current.Resolve<IWorkContext>();
}
<style>
    .form-elements.row.portlet-content {
        padding-left: 20px;
        padding-right: 20px;
    }

    /*.document_child_table th {
        border: 1px solid #ddd;
        font-size: 10px !important;
    }*/

    .document_child_table td {
        /*border: 1px solid #ddd;*/
        font-size: 9px !important;
    }

    .borderred, .subledgeramount:focus {
        border: red 1px solid !important;
    }
    .borderRed {
        border: 1px solid rgb(255, 0, 0);
    }

    .document_child_table th {
        padding: 5px;
    }

    .summary-table th {
        font-size: 10px;
    }

    .summary-table td {
        font-size: 10px !important;
    }

    .nepali-calendar {
        max-width: 100% !important;
    }

    .dynamicform input {
        /*width: 100% !important;*/
        /*margin-top: 6px;
        margin-bottom:10px;*/
    }

        .dynamicform input:focus, #nepaliDate5:focus {
            /*border: solid #808080 1px !important;*/
            transition-duration: 1s;
            transition-timing-function: linear;
        }

    .dynamicform label {
        /*margin-bottom: 0px !important;*/
    }

    .nopaddinggap {
        padding-right: 0px;
    }

    .nopadding-left {
        padding-left: 5px;
    }

    .dynamic-table input {
        border: none;
        /*text-align: right;*/
    }

    .dynamic-table .autocompleteclass.searchProduct.k-input {
        text-align: left !important;
        height: 18px !important;
    }

    .bottomspance {
        padding: 2px 15px !important;
    }

    .portlet-title.mingap {
        min-height: auto !important;
    }

    .savebtn {
        margin-top: 10px;
        margin-left: 3px;
    }

    .dynamic-table input.form-control:focus {
        border: solid #43A12E 1px;
    }

    .dynamic-table .k-input.products.ng-pristine.ng-untouched.ng-valid.ng-empty:focus {
        border: none !important;
    }

    .dynamic-table .k-widget.k-autocomplete.k-header.autocompleteclass.searchProduct.k-state-default {
        background-color: none !important;
        box-shadow: none !important;
        border: none !important;
    }

    .dynamic-table td {
        /*padding: 3px !important;*/
    }

    .k-dropdown-wrap.k-state-default {
        background-color: #fff;
        box-shadow: none !important;
    }

    .title-header {
        text-align: left;
        display: inline-block;
    }

        .title-header h4 {
            color: #093;
            font-size: 12px;
            font-weight: bold;
            margin-bottom: 0;
            padding-top: 9px;
            padding-left: 23px;
        }

    .current-info {
        border: 1px solid #ddd;
        margin-top: 5px;
        min-height: 152px;
        right: 20px;
        top: 104px;
        width: 26px !important;
        position: fixed;
    }


    .document-head {
        /*background-color: #eee;*/
        /*margin-top: 10px;*/
        /*margin-bottom:15px !important;*/
        /* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#ffffff+0,e5e5e5+100;White+3D */
        background: #ffffff; /* Old browsers */
        background: -moz-linear-gradient(top, #ffffff 0%, #e5e5e5 100%); /* FF3.6-15 */
        background: -webkit-linear-gradient(top, #ffffff 0%,#e5e5e5 100%); /* Chrome10-25,Safari5.1-6 */
        background: linear-gradient(to bottom, #ffffff 0%,#e5e5e5 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#e5e5e5',GradientType=0 ); /* IE6-9 */
    }

        .document-head h6 {
            color: #2e2e2e !important;
            font-weight: 600;
            font-size: 10px !important;
            margin-top: 6px !important;
            margin-bottom: 6px !important;
        }

    .user h6, .quotation h6, .date h6 {
        /*padding-top: 8px !important;*/
    }

    .boxbg {
        /*background-color: #ffffe1;*/
        padding-bottom: 15px;
    }

    .mingap {
        /*padding: 4px 20px 4px 20px !important;*/
        padding: 0 0 2px 0px !important;
    }

    .buttonlist {
        /*margin-top: 10px;*/
    }

    .value-summary {
        border: solid #ddd 1px;
        margin-top: 30px;
    }

        .value-summary ul {
            margin-left: 0px;
            padding-left: 0px;
        }

        .current-info h6, .value-summary h6 {
            background-color: #eee;
            color: #2e2e2e !important;
            font-weight: 600;
            margin: 0;
            padding-bottom: 5px;
            padding-left: 12px;
            padding-top: 5px;
            width: 167px !important;
        }

    .headtitle {
        transform: rotate(90deg);
    }

    .value-summary ul li {
        list-style: none;
        text-align: left;
        font-size: 11px;
        border-bottom: 1px solid #eee;
        padding: 5px;
    }

        .value-summary ul li:last-child {
            border-bottom: none !important;
        }

    /*.buttonadd i, .buttondelete i {

        font-size: 12px !important;
    }*/

    /*.buttonadd {
        padding-right: 3px;
        padding-left: 3px;

        margin-left: 5px !important;
        background-color: #ddd !important;
        color: forestgreen;
        border: solid #ccc 1px;
    }

    .buttondelete {
        padding-right: 3px;
        padding-left: 3px;

        margin-left: 2px !important;
        background-color: #ddd !important;
        color: forestgreen;
        border: solid #ccc 1px;
    }*/



    .buttonadd:hover, .buttondelete:hover {
        text-decoration: none !important;
        background-color: #fff !important;
    }



    /*#ledgermodal2 .modal-body.modal-dialogbox-body {
        min-height:500px;
    }*/

    .text-danger {
        font-size: 16px !important;
    }

    .buttonlist i {
        padding-right: 5px !important;
    }

    .buttonlist a, .buttonlist button {
        font-size: 10px !important;
    }

    .buttonlist i {
        font-size: 10px !important;
    }

    .tabbox {
        border: solid #ddd 1px;
    }

        .tabbox .nav-tabs {
            width: 100% !important;
        }

        .tabbox ul li.active a {
            background-color: mediumseagreen !important;
            color: #fff !important;
        }

            .tabbox ul li.active a:hover {
                background-color: mediumseagreen !important;
                color: #fff !important;
            }

    .dynamic-table {
        margin: 10px;
    }

    /*.caption-subject, .caption i {
        color: mediumseagreen !important;
    }*/

    .nogap_bottom {
        margin-bottom: 0px !important;
    }

    .summary-table {
        margin-top: 7px;
    }




    h1 {
        background-color: #dbc6d0;
        border: 1px solid rgba(255,255,255,0.9);
        border-bottom: none;
        border-radius: 0;
        box-shadow: 0 -1px 3px -1px rgba(0,0,0,0.25);
        color: #001f3f; /* navy */
        cursor: pointer;
        display: block;
        font: 200 170%/1.5 'Oswald', sans-serif;
        letter-spacing: 0.02em;
        margin: 0 1px;
        padding: 8px 12px;
        text-shadow: 0 1px 0 rgba(255,255,255,0.6);
    }

        h1:hover {
            background-color: #D1B3C2;
            color: #111;
        }



    .documentform select, .documentform input {
        font-size: 9px !important;
        height: 21px;
    }

    .documentform select {
        padding: 0px 2px !important;
    }

    .documentmodule .k-dropdown-wrap.k-state-default {
        /*height: 22px !important;*/
        font-size: 11px !important;
    }




    .bottomspance .portlet-body {
        padding-top: 0px !important;
    }

    .documentmodule input .form-control, .dynamicform input {
        height: 21px;
        /*border: 1px solid #ddd;*/
        font-size: 10px !important;
        padding: 0 4px 0px 4px !important;
        position: relative;
    }

    #subledgermodal input.form-control, #subledgermodal select {
        height: 21px !important;
        padding: 0px 3px;
    }

    #subledgermodal select {
        width: 50%;
    }

    .documentmodule label.control-label {
        font-size: 11px !important;
        padding-top: 4px !important;
        padding-bottom: 5px !important;
    }

    .documentmodule label {
        font-size: 11px !important;
        /*padding-top: 4px !important;
                                                                  padding-bottom:5px !important;*/
    }


    .nogap-left {
        padding-left: 0px !important;
    }

    .nogap-right {
        padding-right: 0px !important;
    }

    .column-gride-1 {
        width: 27%;
    }

    .column-gride-3 {
        width: 13%;
    }


    .documentform {
        margin-top: 5px !important;
    }

    .document-tab li a {
        padding: 8px 8px !important;
    }

    .dynamicform .form-group {
        margin-bottom: 10px !important;
    }
    /*
                                                              .document-tab li.active a {
                                                                  color: mediumseagreen;
                                                              }*/
    .document-tab {
        margin-top: 10px;
    }

    .tabgaptop {
        margin-top: 5px !important;
    }

    .tab-content.d-tab-content label {
        font-size: 11px !important;
    }


    .backtolist, .savebutton, .resetbutton, .savebtn {
        /*border-radius: 6px !important;*/
        /*box-shadow: 0 1px 0 #2ab7ec inset, 0 2px 0 0 #156785, 0 2px 1px #999;*/
        color: #fff;
        font-size: 11px !important;
        padding: 5px 8px 4px 5px;
        position: relative;
        text-decoration: none;
        border-radius: 2px !important;
    }

        .backtolist i {
            font-size: 15px !important;
            color: #666;
        }

    .a_demo_four {
        background-color: #3bb3e0;
        background-image: linear-gradient(to top, rgb(44, 160, 202) 0%, rgb(62, 184, 229) 100%);
    }

    .savebutton {
        /* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#9dd53a+0,80c217+0,a1d54f+0,7cbc0a+100 */
        background: #9dd53a !; /* Old browsers */
        background: -moz-linear-gradient(top, #9dd53a 0%, #80c217 0%, #a1d54f 0%, #7cbc0a 100%); /* FF3.6-15 */
        background: -webkit-linear-gradient(top, #9dd53a 0%,#80c217 0%,#a1d54f 0%,#7cbc0a 100%); /* Chrome10-25,Safari5.1-6 */
        background: linear-gradient(to bottom, #9dd53a 0%,#80c217 0%,#a1d54f 0%,#7cbc0a 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#9dd53a', endColorstr='#7cbc0a',GradientType=0 ); /* IE6-9 */
    }

    .resetbutton {
    }

        .a_demo_four:hover, .savebutton:hover, .resetbutton:hover {
            color: #fff !important;
        }

    .gap {
        padding: 10px;
    }



    .nopadding-right {
        padding-right: 0px !important;
    }

    .dataTables_wrapper {
        border: solid #ddd 1px !important;
    }

    .custom-col-width {
        /*width: 96%;*/
        width: 100%;
    }

    .hideshow-infomation {
        width: 6% !important;
        padding-right: 0px;
        /*float:right;*/
    }



    .custom-width-2 {
        width: 4%;
        padding-right: 0px;
        padding-left: 10px;
        position: relative;
    }







    #style-switcher {
        margin-bottom: 15px;
    }


    #style-switcher, #style-switcher-2 {
        background: #fff none repeat scroll 0 0;
        z-index: 1000;
        width: 100%;
        position: relative;
        overflow: hidden;
        height: 180px;
        border: 1px solid #ddd;
    }


    #toggle-switcher, #toggle-switcher-2 {
        background: #999 none repeat scroll 0 0;
        color: #fff;
        cursor: pointer;
        display: block;
        font-size: 14px;
        padding: 6px 5px;
        position: absolute;
        text-align: center;
        text-transform: capitalize;
        top: 180px;
        transform: rotate(-90deg);
        transform-origin: 0 0 0;
        width: 180px;
    }

    .general-info, .general-info-2 {
        width: 100%;
        background: #fff;
        height: 100%;
        /*margin-left:35px;*/
        padding-left: 45px;
        padding-right: 5px;
        font-size: 10px;
        padding-top: 5px;
        left: 44px;
        position: absolute;
    }


    .calendar-icon {
        font-size: 11px;
        right: -9px;
        position: absolute;
        top: 3px;
        color: #666;
    }


    .calendar-icon-2 {
        font-size: 11px;
        right: 6px;
        position: absolute;
        top: 3px;
        color: #666;
    }

    .calendar-icon-3 {
        font-size: 11px;
        right: 8px;
        position: absolute;
        top: 3px;
        color: #666;
    }


    .tooltip {
        position: absolute !important;
        z-index: 800000 !important;
    }

    #customers-list li {
        font-size: 10px !important;
    }

    /*.modal-dialogbox-body .form-control {
                                                                  height: 2px !important;
                                                              }*/
    .modal-dialogbox-body label {
        font-size: 12px;
    }

    .modal-dialogbox-body .control-label {
        text-align: right;
    }

    .modal-dialogbox-body input.form-control {
        height: 20px;
        font-size: 11px;
        padding: 0px 5px;
    }

    .input-space {
        margin-left: 10px !important;
    }

    .autocompleteform .k-widget {
        border: solid 1px #e5e5e5 !important;
    }

        .autocompleteform .k-widget input {
            height: 17px !important;
        }

    .modal-table {
        margin: 0px !important;
        /*width: 100%;*/
    }

        /*.modal-table th {
            padding: 3px;
            border-bottom: none !important;
        }*/
        .modal-table tbody.table_body {
            min-height: 100px !important;
            max-height: 115px !important;
        }

    /*.k-widget {
        width: 97%;
    }*/
    .k-widget.k-datepicker {
        width: 97%;
    }

    /*#subledgermodal .modal-dialog select {
        height: 21px;
    }*/
    #subledgermodal input.form-control, #budgetmodal input.form-control {
        /*border: none;*/
        height: 21px !important;
    }
    /*#subledgermodal input.form-control:focus, #budgetmodal input.form-control:focus {
            border: solid #4AA436 1px;
        }*/
    .document_child_table input.k-input {
        min-height: 19px;
    }

    #ledgermodal .modal-header {
        padding: 10px !important;
        background-color: #eee;
    }

    #budgetmodal .modal-header {
        padding: 10px !important;
        background-color: #eee;
    }

    #ledgermodal .modal-body {
        padding: 10px !important;
    }

    #subledgermodal label {
        font-size: 11px;
    }

    fieldset legend {
        width: 14% !important;
    }

    .document_child_table .ACC_CODE {
        width: 27.8%;
    }

    .document_child_table .TRANSACTION_TYPE {
        width: 4.7%;
    }

    .document_child_table .AMOUNT {
        width: 15.45%;
    }

    .document_child_table .PARTICULARS {
        width: 23%;
    }

    .ACC_CODE_div {
        width: 27.8%;
    }

    .TRANSACTION_TYPE_div {
        width: 4.7%;
    }

    .AMOUNT_div {
        width: 15.45%;
    }

    .PARTICULARS_div {
        width: 23%;
    }

    .BUDGET_FLAG_div {
        width: 8%;
    }

    .select_option {
        width: 100%;
        height: 20px;
    }

    .documentform {
        position: relative;
    }

    /*.documentform .remarks {
            position: absolute;
            right: -73%;
            width: 247%;
            top: 174px;
        }*/

    .custom-btn {
        color: #fff;
        background-color: #60AA4E;
        border-color: #ccc;
    }

    .header-modal .modal-title {
        background-color: #eee;
    }

    /*.modal-table .k-dropdown-wrap {
        height: 20px !important;
        width: 100%;
        padding-right: 0px !important;
    }*/
    /*.modal-table input.form-control {
                                                                  border: none !important;
                                                              }*/

    /*.modal-table input.form-control:focus
                                                                        {
                                                                        border:solid #333 1px !important;
                                                                        }*/
    .modal-table .k-select {
        display: none !important;
    }

    .modal-table .k-input {
        min-height: 19px !important;
    }

    .modal-table .k-list ul li, .k-list.k-reset li {
        font-size: 11px !important;
    }

    .dynamic-table .k-dropdown-wrap {
        padding-right: 0px !important;
    }

    .dynamic-table .k-widget {
        width: 99.5%;
    }

    .modal-table input.k-input {
        font-size: 11px;
        overflow: auto !important;
        text-overflow: ellipsis !important;
    }

    .BUDGET_FLAG {
        width: 8%;
    }

    /*.caption-title {
        width: 73%;
    }*/

    .top-date {
        float: right;
    }

    .subledger-table .k-i-close {
        display: none;
    }

    .dropzone-download {
        font-size: 17px !important;
        position: absolute;
        top: 112px;
        right: 9px;
    }

    /*.subledger-table thead, .subledger-table tbody tr {
        display: table !important;
        width: 100% !important;
        table-layout: fixed !important;
    }*/


    .k-i-close {
        display: none;
    }

    .subledger_transaction_type option[value="? undefined:undefined ?"] {
        display: none;
    }

    .subledgerdialog-box {
        width: 627px;
    }

    .menuDropdown .dropdown-menu {
        min-width: 175px;
        position: absolute;
        top: 67%;
        left: -87px;
        z-index: 5000;
    }

        .menuDropdown .dropdown-menu:before, .menuDropdown .dropdown-menu:after {
            left: 151px;
        }
    span.k-picker-wrap.k-state-default {
        height:18px !important;
    }
</style>

<div class="col-md-12 bodyController" id="ContraVoucherCtrl">
    <div class="portlet light form-fit1 bordered bottomspance">
        <div class="portlet-title">
            <div class="caption">
                <a class="btn-back pull-left" data-toggle="tooltip" data-placement="top" title="Back To Dashboard" href="/DocumentTemplate/Home/Dashboard">
                    <i class="fa fa-arrow-circle-left"></i>
                </a>
                <i class="fa fa-gift font-green-haze"></i>
                <span class="caption-subject font-green-haze bold uppercase">
                    {{FormName}}
                </span>
                @*/@workingContent.CurrentUserinformation.branch_name*@
                @*<p class="top-date">Date : @DateTime.Now.ToString("dd MMM yyyy")/{{NepaliDate}}</p>*@
            </div>

            <div class="actions">
                <div class="btn-group" ng-if="havRefrence=='Y'">
                    <a href="javascript:;" class="btn blue-soft btn-sm" id="btnrefrence" ng-click="ShowRefrenceFinance()" data-toggle="tooltip" title="View reference data">
                        <i class="fa fa-exchange"></i> Reference
                    </a>
                </div>
                <div class="btn-group" ng-if="RT_CONTROL_FLAG=='Y'">
                    <a href="javascript:;" class="btn blue-soft btn-sm" id="btnproductCalcuation" ng-click="getVoucherDetailForReferenceProduct()" data-toggle="tooltip" title="View Production data">
                        <i class="fa fa-exchange"></i> Calc PO
                    </a>
                </div>

                @*<a href="javascript:;" class="btn btn-default btn-sm" id="resetdocument" ng-click="reset()">
            <i class="fa fa-share"></i> Reset
        </a>*@
                @*<div class="btn-group">
            <a class="btn btn-sm btn-green" id="savedocumentformdata" data-loading-text="<i class='fa fa-spinner fa-spin '></i> Processing..." ng-click="SaveDocumentFormData(0)" href="javascript:;">
                <i class="fa fa-floppy-o"></i> {{save}}

            </a>
        </div>*@
                @*<a ng-if="savecontinue==='Save & Continue'" class="btn btn-sm btn-green-light" id="savedocumentformdata" data-loading-text="<i class='fa fa-spinner fa-spin '></i> Processing..." ng-click="SaveDocumentFormData(1)" href="javascript:;">
            <i class="fa fa-floppy-o"></i> {{savecontinue}}

        </a>*@
                @*<a ng-if="OrderNo !== 'undefined/undefined/undefined'" class="btn btn-sm btnlight-green" data-toggle="tooltip" data-placement="top" title="Add Finance" href="/DocumentTemplate/Home/Index#!DT/FinanceVoucher?formcode={{formcode}}">
            <i class="fa fa-plus-circle" aria-hidden="true"></i> New

        </a>*@
                @*<a class="btn btn-sm btn-default" id="saveasdraft" data-loading-text="<i class='fa fa-spinner fa-spin '></i> Processing..." ng-click="SaveAsDraft(1)" href="javascript:;">
            <i class="fa fa-floppy-o font-green-haze"></i> Save As Draft

        </a>*@
                @*<a class="btn btn-circle btn-icon-only btn-default" id="getDraftItem" ng-click="showDraftModal()" href="javascript:void(0);" title="Get Draft Value">
            <i class="fa fa-file" aria-hidden="true"></i>
        </a>*@
                <div class="btn-group menuDropdown" data-toggle="tooltip" title="Actions">
                    <a class="btn btn-green" href="javascript:;" data-toggle="dropdown" aria-expanded="false">
                        <i class="fa fa-user"></i> Actions
                        <i class="fa fa-angle-down"></i>
                    </a>
                    <ul class="dropdown-menu">
                        <li ng-if="OrderNo !== 'undefined'">
                            <a title="Add Finance" data-toggle="tooltip" href="/DocumentTemplate/Home/Index#!DT/FinanceVoucher?formcode={{formcode}}">
                                <i class="glyphicon glyphicon-new-window"></i> New
                            </a>
                        </li>
                        @*<li>
                    <a id="resetdocument" ng-click="reset()" href="javascript:;">
                        <i class="fa fa-share"></i> Reset (Alt + R)
                    </a>
                </li>*@
                        <li>
                            <a href="javascript:;" id="savedocumentformdata" data-loading-text="<i class='fa fa-spinner fa-spin '></i> Processing..." ng-click="SaveDocumentFormData(0)" data-toggle="tooltip" title="Save document">
                                <i class="fa fa-floppy-o"></i> {{save}} (Ctrl + Enter)
                            </a>
                        </li>
                        <li>
                            <a ng-if="savecontinue==='Save & Continue'" id="savedocumentformdata" data-toggle="tooltip" title="Save and continue for new document" data-loading-text="<i class='fa fa-spinner fa-spin '></i> Processing..." ng-click="SaveDocumentFormData(1)" href="javascript:;">
                                <i class="fa fa-floppy-o"></i> {{savecontinue}} (Alt + C)
                            </a>
                        </li>
                        @*<li>


                        <a ng-click="SaveDocumentFormData(3)" href="javascript:;">
                        <i class="fa fa-print"></i>Save & Print (Alt + P)
                    </a>
                    ng-if="formControlModelData[0].CREATE_FLAG == 'Y'"
                </li>*@
                        <li class="divider"> </li>
                        <li>
                            <a id="getDraftItem" ng-click="showDraftModal()" href="javascript:;" data-toggle="tooltip" title="Get Draft Value">
                                <i class="fa fa-list"></i> Draft List (Shift + Alt + D )
                            </a>
                        </li>
                        <li>
                            <a id="saveasdraft" data-loading-text="<i class='fa fa-spinner fa-spin '></i> Processing..." ng-click="SaveAsDraft(1)" href="javascript:;" data-toggle="tooltip" title="Save document as draft">
                                <i class="fa fa-file"></i> Save As Draft (Alt +S)
                            </a>
                        </li>
                    </ul>
                </div>
                <a ng-if="OrderNo === 'undefined'" class="btn btn-primary" data-toggle="tooltip" data-placement="top" @*title="(Alt + P)"*@ title="Save and print document" ng-click="SaveDocumentFormData(3)" href="javascript:;">
                    <i class="fa fa-print"></i> Save & Print
                </a>
                <a ng-if="OrderNo!== 'undefined'" class="btn btn-primary" data-toggle="tooltip" data-placement="top" @*title="(Alt + P)"*@ title="Update and print document" ng-click="SaveDocumentFormData(4)" href="javascript:;">
                    <i class="fa fa-print"></i> Update & Print
                </a>
                <a ng-if="OrderNo!== 'undefined'" class="btn btn-primary" data-toggle="tooltip" data-placement="top" @*title="(Alt + P)"*@ title="Delete Document" ng-click="DeleteFinanceDocument()" href="javascript:;">
                    <i class="fa fa-trash-o"></i> Detele
                </a>
            </div>
        </div>

        <div class="portlet-body">
            <div class="row boxbg">

                <div ng-repeat="(key,it) in dynamicSubLedgerModalData">
                    <div class="modal fade childmodalsubledgerbudger dynamicSubLedgerModal_{{$index}}" id="ledgermodal" data-backdrop="static" tabindex="-1" data-width="760">
                        <div class="modal-dialog subledgerdialog-box " id="subledgermodal">
                            <div class="modal-content">
                                <div class="modal-header">
                                    @*<button type="button" class="close" data-dismiss="modal" aria-hidden="true" next-on-tab>&times;</button>*@
                                    <h4 class="modal-title">
                                        <span class="fa fa-list-ul"></span>
                                        {{accName}}
                                    </h4>
                                </div>
                                <div class="modal-body modal-dialogbox-body">
                                    <div class="row">
                                        <div class="col-xs-12 col-sm-4 col-md-4">
                                            <div class="form-group">
                                                <label class="control-label">Subledger Amount: @*<i class="fa fa-info-circle font-green" data-toggle="tooltip" title="Subledger Amount"></i>*@</label>
                                                <input type="number" class="form-control subledgerpopupamountfield textbox" min="0" ng-value="SUBLEDGER_AMOUNT_CALCULATION" ng-model="it.SUBLEDGER_AMOUNT" readonly next-on-tab />
                                            </div>
                                        </div>

                                        <div class="col-xs-12 col-sm-4 col-md-4">
                                            <div class="form-group">
                                                <label class="control-label">Remaining Amount: @*<i class="fa fa-info-circle font-green" data-toggle="tooltip" title="Remaining Amount"></i>*@</label>

                                                <input type="number" class="form-control remainingamt" ng-value="REMAINING_AMOUNT_CALCULATION" ng-model="it.REMAINING_AMOUNT" readonly next-on-tab />

                                            </div>
                                        </div>

                                        <div class="col-xs-12 col-sm-4 col-md-4">
                                            <div class="form-group">

                                                <label class="control-label">Transaction Type: @*<i class="fa fa-info-circle font-green" data-toggle="tooltip" title="Transaction Type"></i>*@</label>
                                                {{checktransaction}}
                                                <select class="form-control subledger_transaction_type" ng-model="it.TRANSACTION_TYPE" ng-change="ChangeTransactionType(key)" ng-show="checktransaction" disabled="disabled">
                                                    <option value="DR">Dr</option>
                                                    <option value="CR">Cr</option>
                                                </select>
                                                <select class="form-control subledger_transaction_type" ng-model="it.TRANSACTION_TYPE" ng-change="ChangeTransactionType(key)" ng-show="!checktransaction">
                                                    <option value="DR">Dr</option>
                                                    <option value="CR">Cr</option>
                                                </select>
                                            </div>
                                        </div>
                                        <label style="float:right; color:red;">{{errorshow}} </label>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <table class="document_child_table dynamic-table  table-fixed dynamic_child_table modal-table dynamic_child_table1">
                                                <thead class="child-table-head">
                                                    <tr>
                                                        <th width="12%"><label for="element">Code @*<i class="fa fa-info-circle font-green" data-toggle="tooltip" title="Code"></i>*@</label></th>
                                                        <th width="20%"><label for="element">Subledger @*<i class="fa fa-info-circle font-green" data-toggle="tooltip" title="Subledger"></i>*@</label></th>
                                                        <th width="20%"><label for="element">Dealer @*<i class="fa fa-info-circle font-green" data-toggle="tooltip" title="Subledger"></i>*@</label></th>
                                                        <th width="20%"><label for="element">Particulars @*<i class="fa fa-info-circle font-green" data-toggle="tooltip" title="Particulars"></i>*@</label></th>
                                                        <th width="18%"><label for="element">Amount @*<i class="fa fa-info-circle font-green" data-toggle="tooltip" title="Amount"></i>*@</label></th>
                                                        <th width="10%"><label for="element"></label></th>
                                                    </tr>
                                                </thead>
                                                <tbody class="table_body">
                                                    <tr ng-repeat="ref in it.SUBLEDGER track by $index">

                                                        <td width="12%"> @Html.Partial("~/Areas/NeoERP.DocumentTemplate/Views/Shared/PartialView/_subledgerCodePartial.cshtml")</td>
                                                        <td width="20%"> @Html.Partial("~/Areas/NeoERP.DocumentTemplate/Views/Shared/PartialView/_subledgerPartial.cshtml")</td>
                                                        <td width="20%">
                                                            <input type="text" id="subcodedealercode_{{key}}_{{$index}}" name="subcodedealercode" ng-model="ref.PARTY_TYPE_CODE"  class="partytype party mpartytype" />
                                                        </td>
                                                        <td width="20%"> <input tye="text" class="form-control" ng-model="ref.PARTICULARS" /></td>
                                                        <td width="18%">
                                                            <input type="number" id="subledgeramount" input-value-key="{{key}}" class="form-control SUBLEDGERAMOUNT_{{$index}} subledgeramounts" ng-change="Change(key,childModels[key].AMOUNT)" ng-model="ref.AMOUNT" />
                                                        </td>

                                                        <td width="10%">
                                                            <a href="" id="add_child_subledger" name="add_child_subledger" class="buttonadd" ng-click="add_childSubledger_element($index)"><i class="fa fa-plus" data-toggle="tooltip" title="Add"></i></a>
                                                            <a href="javascript:void(0)" class="buttondelete" style="padding-top:0px !important;">
                                                                <i class="fa fa-trash text-danger" data-tooltip="Remove item" title="Remove item" ng-click="remove_childSubledger_element(key,$index,childModels[key].AMOUNT)"></i>
                                                            </a>
                                                        </td>

                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>

                                <div class="modal-footer">
                                    <span style="color:red;float:left;">{{CodeValidation}}</span>
                                    <button type="button" class="btn btn-sm btn-green subledgerok" data-dismiss="modal" ng-click="SubLedger_Ok($index,$event)" data-toggle="tooltip" title="Ok">Ok</button>
                                    <button type="button" ng-if="OrderNo === 'undefined'" class="btn btn-sm btn-default" data-dismiss="modal" ng-click="SubLedger_Cancel($index)" data-toggle="tooltip" title="Cancel">Cancel</button>
                                    <button ng-if="OrderNo!== 'undefined'" type="button" class="btn btn-sm btn-default" data-dismiss="modal" data-toggle="tooltip" title="Cancel">Cancel</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div ng-repeat="(key,item) in dynamicModalData">
                    <div class="modal fade childmodalsubledgerbudger subledgerModal_{{$index}}" id="budgetmodal" data-backdrop="static" tabindex="-1" data-width="760">
                        <div class="modal-dialog  modal-dialog-box" style="width:45%;">
                            <div class="modal-content">
                                <div class="modal-header">
                                    @*<button type="button" class="close" data-dismiss="modal" aria-hidden="true" next-on-tab=""></button>*@
                                    <h4 class="modal-title">
                                        <span class="fa fa-list-ul"></span>
                                        {{accName}}
                                    </h4>

                                </div>

                                <div class="modal-body modal-dialogbox-body" style="margin:5px;">

                                    <div class="row">
                                        <div class="col-md-12">
                                            <table class="document_child_table dynamic-table  table-fixed dynamic_child_table modal-table dynamic_child_table2">
                                                <thead class="child-table-head">
                                                    <tr>
                                                        <th><label for="element">Budget Center @*<i class="fa fa-info-circle font-green" data-toggle="tooltip" title="Budget Center"></i>*@</label></th>
                                                        <th><label for="element">Narration @*<i class="fa fa-info-circle font-green" data-toggle="tooltip" title="Narration"></i>*@</label></th>
                                                        <th><label for="element">Amount @*<i class="fa fa-info-circle font-green" data-toggle="tooltip" title="Amount"></i>*@</label></th>
                                                        <th width="10%"><label for="element"></label></th>
                                                    </tr>
                                                </thead>
                                                <tbody class="table_body">
                                                    <tr ng-repeat="child in item.BUDGET track by $index">
                                                        <td> @Html.Partial("~/Areas/NeoERP.DocumentTemplate/Views/Shared/PartialView/_budgetCenterPartial.cshtml")</td>
                                                        <td> <input tye="text" class="form-control" ng-model="child.NARRATION" next-on-tab /></td>
                                                        <td><input type="number" id="BudgetAmount" class="form-control BUDGETAMOUNT_{{$index}}" ng-model="child.AMOUNT" ng-change="BudgetChange(key,childModels[key].child.AMOUNT)" /></td>
                                                        <td width="10%">
                                                            <a href="" id="add_child_budgetflag" name="add_child_budgetflag" class="buttonadd  buttonaddmodal" ng-click="add_childbudgetflag_element($index)"><i class="fa fa-plus" data-toggle="tooltip" title="Add"></i></a>
                                                            <a href="javascript:void(0)" class="buttondelete buttondeletemodal">
                                                                <i class="fa fa-trash text-danger" data-tooltip="Remove item" title="Remove item" ng-click="remove_childbudgetflag_element(key,$index)"></i>
                                                            </a>
                                                        </td>
                                                    </tr>

                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>

                                <div class="modal-footer">
                                    <span style="color:red;float:left;" class="ng-binding">{{LedgerAmountValidation}}</span>
                                    <span style="color:red;float:left; padding-left:5px;" class="ng-binding">{{budgetCodeValidation}}</span>
                                    <br />
                                    <span style="color:red;float:left;" class="ng-binding">{{budgetAmountValidation}}</span>

                                    <button type="button" class="btn btn-green" data-dismiss="modal" id="BudgetOk" ng-click="Budget_Ok($event)" data-toggle="tooltip" title="Ok">Ok</button>
                                    <button type="button" class="btn btn-sm btn-default" data-dismiss="modal" ng-click="Budget_Cancel($index)" data-toggle="tooltip" title="Cancel">Cancel</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div ng-repeat="(key,it) in dynamicTDSModalData">
                    <div class="modal fade childmodalsubledgerbudger bs-modal-lg dynamictdsModal_{{$index}}" id="ledgermodal2" data-backdrop="static" tabindex="-1" data-width="760">
                        <div class="modal-dialog modal-lg  " id="subledgermodal">
                            <div class="modal-content">
                                <div class="modal-header">
                                    @*<button type="button" class="close" data-dismiss="modal" aria-hidden="true" next-on-tab>&times;</button>*@
                                    <h4 class="modal-title">
                                        <span class="fa fa-list-ul"></span>
                                        {{accName}}
                                    </h4>
                                </div>
                                <div class="modal-body modal-dialogbox-body">
                                    <div class="row">
                                        @*<div class="col-xs-12 col-sm-6 col-md-6">
                                            <div class="form-group">
                                                <label class="control-label">Voucher No:</label>
                                                <input type="text" class="form-control subledgerpopupamountfield textbox" ng-model="it.VOUCHER_NO" readonly next-on-tab />
                                            </div>
                                        </div>



                                        <div class="col-xs-12 col-sm-6 col-md-6">
                                            <div class="form-group">

                                                <label class="control-label">Invoice Date:</label>

                                                <input type="text" class="form-control subledgerpopupamountfield textbox" ng- model="it.INVOICE_DATE" readonly next-on-tab />

                                            </div>
                                        </div>*@
                                        @*<label style="float:right; color:red;">{{errorshow}} </label>*@
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <table class="document_child_table dynamic-table  table-fixed dynamic_child_table modal-table dynamic_child_table3">
                                                <thead class="child-table-head">
                                                    <tr>
                                                        <th width="13%"><label for="element">Party Name @*<i class="fa fa-info-circle font-green" data-toggle="tooltip" title="Party Name"></i>*@</label></th>
                                                        <th width="13%"><label for="element">Expences Ledger @*<i class="fa fa-info-circle font-green" data-toggle="tooltip" title="Expences Ledger"></i>*@</label></th>
                                                        <th width="13%"><label for="element">TDS Type @*<i class="fa fa-info-circle font-green" data-toggle="tooltip" title="TDS Type"></i>*@</label></th>
                                                        <th width="13%"><label for="element">Meeting Type @*<i class="fa fa-info-circle font-green" data-toggle="tooltip" title="Meeting Type"></i>*@</label></th>
                                                        <th width="13%"><label for="element">Net Amount @*<i class="fa fa-info-circle font-green" data-toggle="tooltip" title="Net Amount"></i>*@</label></th>
                                                        <th width="13%"><label for="element">TDS % @*<i class="fa fa-info-circle font-green" data-toggle="tooltip" title="TDS %"></i>*@</label></th>
                                                        <th width="12%"><label for="element">TDS Amount @*<i class="fa fa-info-circle font-green" data-toggle="tooltip" title="TDS Amount"></i>*@</label></th>
                                                        <th width="10%"><label for="element"></label></th>
                                                    </tr>
                                                </thead>
                                                <tbody class="table_body">
                                                    <tr ng-repeat="reff in it.CHILDTDS track by $index">
                                                        <td width="13%"> @Html.Partial("~/Areas/NeoERP.DocumentTemplate/Views/Shared/PartialView/_tdsSupplierPartial.cshtml")</td>
                                                        <td width="13%">@Html.Partial("~/Areas/NeoERP.DocumentTemplate/Views/Shared/PartialView/_tdsaccpartial.cshtml")</td>
                                                        <td width="13%">@Html.Partial("~/Areas/NeoERP.DocumentTemplate/Views/Shared/PartialView/_tdstypePartial.cshtml")</td>
                                                        <td width="13%"> <input tye="text" class="form-control" ng-model="reff.MEETING_TYPE_CODE" /></td>
                                                        <td width="13%"> <input tye="text" class="form-control" ng-model="reff.NET_AMOUNT" /></td>
                                                        @*<input type="number" id="subledgeramount" input-value-key="{{key}}" class="form-control SUBLEDGERAMOUNT_{{$index}} subledgeramounts" ng-change="Change(key,childModels[key].AMOUNT)" ng-model="ref.AMOUNT" />*@
                                                        <td width="13%"> <input tye="text" class="form-control" input-value-key="{{key}}" ng-change="calculatetdsamount(key,$index)" ng-model="reff.TDS_PERCENTAGE" /></td>
                                                        <td width="12%"> <input tye="text" class="form-control" ng-model="reff.TDS_AMOUNT" /></td>
                                                        <td width="10%">
                                                            <a href="" id="add_child_subledger" name="add_child_subledger" class="buttonadd" ng-click="add_childtds_element($index)"><i class="fa fa-plus" data-toggle="tooltip" title="Add"></i></a>
                                                            <a href="javascript:void(0)" class="buttondelete" style="padding-top:0px !important;">
                                                                <i class="fa fa-trash text-danger" data-tooltip="Remove item" title="Remove item" ng-click="remove_childtds_element(key,$index)"></i>
                                                            </a>
                                                        </td>

                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-12 col-sm-6 col-md-6">
                                            <div class="form-group">
                                                <label class="control-label">Remarks: <i class="fa fa-info-circle font-green" data-toggle="tooltip" title="Remarks"></i></label>
                                                <input type="text" class="form-control textbox" ng-model="it.REMARKS" />
                                            </div>
                                        </div>
                                        <div class="col-xs-12 col-sm-6 col-md-6">
                                            <div class="form-group">
                                                <label class="control-label">Total TDS Amount: <i class="fa fa-info-circle font-green" data-toggle="tooltip" title="Total TDS Amount"></i></label>
                                                <input type="text" class="form-control  textbox" ng-model="it.TOTAL_TDS_AMOUNT" />
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="modal-footer">
                                    <span style="color:red;float:left;">{{TDSCodeValidation}}</span>
                                    <button type="button" class="btn btn-sm btn-green subledgerok" data-dismiss="modal" ng-click="TDS_Ok($index,$event)" data-toggle="tooltip" title="Ok">Ok</button>
                                    <button type="button" ng-if="OrderNo === 'undefined'" class="btn btn-sm btn-default" data-dismiss="modal" ng-click="tds_Cancel($index)" data-toggle="tooltip" title="Cancel">Cancel</button>
                                    <button ng-if="OrderNo!== 'undefined'" type="button" class="btn btn-sm btn-default" data-dismiss="modal" data-toggle="tooltip" title="Cancel">Cancel</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div ng-repeat="(key,it) in dynamicVATModalData">
                    <div class="modal fade childmodalsubledgerbudger dynamicVATModal_{{$index}}" id="ledgermodal2" data-backdrop="static" tabindex="-1" data-width="760">
                        <div class="modal-dialog subledgerdialog-box " id="subledgermodal">
                            <div class="modal-content">
                                <div class="modal-header">
                                    @*<button type="button" class="close" data-dismiss="modal" aria-hidden="true" next-on-tab>&times;</button>*@
                                    <h4 class="modal-title">
                                        <span class="fa fa-list-ul"></span>
                                        {{accName}}
                                    </h4>
                                </div>
                                <div class="modal-body modal-dialogbox-body">
                                    <div class="row">
                                        <div class="col-xs-12 col-sm-4 col-md-4">
                                            <div class="form-group">
                                                <label class="control-label">Invoice/PP No: <i class="fa fa-info-circle font-green" data-toggle="tooltip" title="Invoice/PP No."></i></label>
                                                <input type="text" class="form-control subledgerpopupamountfield textbox" ng-model="it.INVOICE_NO" next-on-tab />
                                            </div>
                                        </div>
                                        @*<div class="col-xs-12 col-sm-4 col-md-4">
                                            <div class="form-group">
                                                <label class="control-label">REFRENCE No:</label>
                                                <input type="text" class="form-control subledgerpopupamountfield textbox" ng-model="it.REFRENCE_NO" readonly next-on-tab />
                                            </div>
                                        </div>


                                        <div class="col-xs-12 col-sm-4 col-md-4">
                                            <div class="form-group">

                                                <label class="control-label">Invoice Date:</label>

                                                <input type="text" class="form-control subledgerpopupamountfield textbox" ng-model="it.INVOICE_DATE" readonly next-on-tab />

                                            </div>
                                        </div>*@
                                        @*<label style="float:right; color:red;">{{errorshow}} </label>*@
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-12 col-sm-4 col-md-4">
                                            <div class="form-group">
                                                <label class="control-label">DOC TYPE: <i class="fa fa-info-circle font-green" data-toggle="tooltip" title="Document Type"></i></label>
                                                @*<input type="text" class="form-control subledgerpopupamountfield textbox" ng-model="it.DOC_TYPE" readonly next-on-tab />*@
                                                <select class="form-control" name='doctype' ng-model="it.DOC_TYPE" id="doctype_{{key}}" ng-change="ChangeDocTypeVat(key)">
                                                    <option value='' selected>Select Type</option>
                                                    <option value='S'>Sale</option>
                                                    <option value='P'>Purchase</option>

                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-xs-12 col-sm-4 col-md-4">
                                            <div class="form-group">
                                                <label class="control-label">TYPE: @*<i class="fa fa-info-circle font-green" data-toggle="tooltip" title="Type"></i>*@</label>
                                                @*<input type="text" class="form-control subledgerpopupamountfield textbox" ng-model="it.TYPE" readonly next-on-tab />*@
                                                <select class="form-control" name='type' ng-model="it.TYPE" id="type_{{key}}">
                                                    <option value='LOC'>Local</option>
                                                    <option value='IMP'>Import</option>
                                                    <option value='CAP'>Capital</option>
                                                    <option value='ADM'>Admin</option>
                                                    <option value='SAL'>Sales</option>
                                                    <option value='GEN'>General</option>

                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-xs-12 col-sm-4 col-md-4">
                                            <div class="form-group">
                                                <label class="control-label">Vat Adgestment: @*<i class="fa fa-info-circle font-green" data-toggle="tooltip" title="Type"></i>*@</label>
                                                @*<input type="text" class="form-control subledgerpopupamountfield textbox" ng-model="it.TYPE" readonly next-on-tab />*@
                                                <input id="Checktype_{{key}}" type="checkbox" ng-model="it.Enable_DirectEntry" value="false" aria-label="Follower input">

                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <table class="document_child_table dynamic-table  table-fixed dynamic_child_table modal-table dynamic_child_table4">
                                                <thead class="child-table-head">
                                                    <tr>
                                                        <th width="30%"><label for="element">PARTY NAME @*<i class="fa fa-info-circle font-green" data-toggle="tooltip" title="Party Name"></i>*@</label></th>
                                                        <th width="30%"><label for="element">TAXABLE AMOUNT @*<i class="fa fa-info-circle font-green" data-toggle="tooltip" title="Taxable Amount"></i>*@</label></th>
                                                        <th width="30%"><label for="element">VAT AMOUNT @*<i class="fa fa-info-circle font-green" data-toggle="tooltip" title="Vat Amount"></i>*@</label></th>
                                                        <th width="10%"><label for="element"></label></th>
                                                    </tr>
                                                </thead>
                                                <tbody class="table_body">
                                                    <tr ng-repeat="ref in it.CHILDVAT track by $index">
                                                        <td width="30%">  @Html.Partial("~/Areas/NeoERP.DocumentTemplate/Views/Shared/PartialView/_VatSupplierPartial.cshtml")</td>
                                                        <td width="30%"> <input tye="text" class="form-control" ng-model="ref.TAXABLE_AMOUNT" ng-change="calculatevatamount(key,$index)" /></td>
                                                        <td width="30%"> <input tye="text" class="form-control" ng-model="ref.VAT_AMOUNT" ng-change="calculateBaseamount(key,$index)" /></td>

                                                        <td width="10%">
                                                            <a href="" id="add_child_subledger" name="add_child_subledger" class="buttonadd" ng-click="add_childvat_element($index)"><i class="fa fa-plus" data-toggle="tooltip" title="Add"></i></a>
                                                            <a href="javascript:void(0)" class="buttondelete" style="padding-top:0px !important;">
                                                                <i class="fa fa-trash text-danger" data-tooltip="Remove item" title="Remove item" ng-click="remove_childvat_element(key,$index)"></i>
                                                            </a>
                                                        </td>

                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-12 col-sm-6 col-md-6">
                                            <div class="form-group">
                                                <label class="control-label">Remarks: @*<i class="fa fa-info-circle font-green" data-toggle="tooltip" title="Remarks"></i>*@</label>
                                                <input type="text" class="form-control textbox" ng-model="it.REMARKS" />
                                            </div>
                                        </div>
                                        <div class="col-xs-12 col-sm-6 col-md-6">
                                            <div class="form-group">
                                                <label class="control-label">Total VAT Amount: @*<i class="fa fa-info-circle font-green" data-toggle="tooltip" title="Total Vat Amount"></i>*@</label>
                                                <input type="text" class="form-control  textbox" ng-model="it.TOTAL_VAT_AMOUNT" />
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="modal-footer">
                                    <span style="color:red;float:left;">{{VATCodeValidation}}</span>
                                    <button type="button" class="btn btn-sm btn-green subledgerok" data-dismiss="modal" ng-click="VAT_Ok($index,$event)" data-toggle="tooltip" title="Add">Ok</button>
                                    <button type="button" ng-if="OrderNo === 'undefined'" class="btn btn-sm btn-default" data-dismiss="modal" ng-click="vat_Cancel($index)" data-tooltip="tooltip" title="Cancel">Cancel</button>
                                    <button ng-if="OrderNo!== 'undefined'" type="button" class="btn btn-sm btn-default" data-dismiss="modal" data-tooltip="tooltip" title="Cancel">Cancel</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xs-11 col-sm-11 col-md-11 custom-col-width">
                    <form id="documentformelementvalues" class="documentform">
                        <!-- rendering master elements -->
                        <div class="row masterDiv">
                            @Html.Partial("~/Areas/NeoERP.DocumentTemplate/Views/Shared/PartialView/_masterFieldPartial.cshtml")
                        </div>

                        <div class="clearfix"></div>

                        <div ng-if="ModuleCode== '01'" class="childDiv">
                            @{
                                @Html.Partial("~/Areas/NeoERP.DocumentTemplate/Views/Shared/ModulePartialView/_FinancialAccFormTab.cshtml")
                            }
                        </div>
                        <div ng-if="ModuleCode== '02'" class="childDiv">
                            @{
                                @Html.Partial("~/Areas/NeoERP.DocumentTemplate/Views/Shared/ModulePartialView/_InvPurcurementFormTab.cshtml")
                            }
                        </div>
                        <div ng-if="ModuleCode== '03'" class="childDiv">
                            @{
                                @Html.Partial("~/Areas/NeoERP.DocumentTemplate/Views/Shared/ModulePartialView/_PrdManagementFormTab.cshtml")
                            }
                        </div>
                        <div ng-if="ModuleCode== '04'" class="childDiv">
                            @{
                                @Html.Partial("~/Areas/NeoERP.DocumentTemplate/Views/Shared/ModulePartialView/_SalesNRevenuFormTab.cshtml")
                            }
                        </div>
                    </form>
                    <div class="row">
                        <div class="summary-table">
                            @Html.Partial("~/Areas/NeoERP.DocumentTemplate/Views/Shared/PartialView/_financeSummaryTable.cshtml")

                            <div class="col-xs-6 col-sm-4 col-md-4">
                                <div ng-repeat="element in MasterFormElement | orderBy: 'SERIAL_NO'" ng-if="element.COLUMN_NAME.indexOf('REMARKS') !== -1">

                                    <label class="control-label" for="element">{{element.COLUMN_HEADER}} <i class="fa fa-info-circle font-green" data-toggle="tooltip" title="{{element.HELP_DESCRIPTION}}"></i></label>

                                    <textarea id="salestype" ng-model="masterModels[element.COLUMN_NAME]" name="salestype" class="form-control salestype" type="textarea" style="width: 98%; height:29px;" next-on-tab />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                @*@Html.Partial("~/Areas/NeoERP.DocumentTemplate/Views/Shared/PartialView/_financeGeneralInfo.cshtml")*@
            </div>
        </div>
        @*@Html.Partial("~/Areas/NeoERP.DocumentTemplate/Views/Shared/SetupPartial/_quickSetup.cshtml")*@
        @Html.Partial("~/Areas/NeoERP.DocumentTemplate/Views/Shared/PartialView/_tablerefrence.cshtml")

        @Html.Partial("~/Areas/NeoERP.DocumentTemplate/Views/Shared/Draft/_draftModalPartial.cshtml")

        <div class="modal fade-out" id="saveAndPrintModal" data-backdrop="static" tabindex="-1" data-width="760">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        @*<button type="button" class="close" data-dismiss="modal" aria-hidden="true" next-on-tab>&times;</button>*@
                        @*<h4 class="modal-title" style="text-align:center">
                            <span class="fa fa-print"></span>
                            Print
                        </h4>*@
                        <h4 class="modal-title">
                            <span class="fa fa-print"></span>
                        </h4>
                    </div>

                    <div id="saveAndPrintModalFor" class="modal-body saveAndPrintModal main">
                        <form name="saveAndPrint" class="form-horizontal">
                            @*@Html.Partial("~/Areas/NeoERP.DocumentTemplate/Views/Shared/PrintTemplate/_defaultPrintingTemplate.cshtml")*@
                            @*@Html.Partial("~/Areas/NeoERP.DocumentTemplate/Views/Shared/SaveAndPrint/_SalesModulePrint.cshtml")*@
                            @*@Html.Partial("~/Areas/NeoERP.DocumentTemplate/Views/Shared/PrintTemplate/Finance/_bankAndCashPaymentReceiptTemplate.cshtml")*@
                            @*@Html.Partial("~/Areas/NeoERP.DocumentTemplate/Views/Shared/PrintTemplate/Finance/_contraPSJournalVoucherTemplate.cshtml")*@
                            @*@Html.Partial("~/Areas/NeoERP.DocumentTemplate/Views/Shared/PrintTemplate/Finance/_bankAndCashPaymentReceiptTemplate.cshtml")*@

                            <div ng-if="printCompanyInfo.formType==='CH' || printCompanyInfo.formType==='BK'">
                                @Html.Partial("~/Areas/NeoERP.DocumentTemplate/Views/Shared/PrintTemplate/Finance/_bankAndCashPaymentReceiptTemplate.cshtml")
                            </div>
                            <div ng-if="printCompanyInfo.formType==='JV'">
                                @Html.Partial("~/Areas/NeoERP.DocumentTemplate/Views/Shared/PrintTemplate/Finance/_contraPSJournalVoucherTemplate.cshtml")
                            </div>
                        </form>
                    </div>

                    <div class="modal-footer">
                        <a ng-click="printDiv('saveAndPrintModalFor')" class="btn btn-sm btn-green" id="savedocumentformdata" data-loading-text="<i class='fa fa-spinner fa-spin '></i> Processing..." href="javascript:;">
                            <i class="fa fa-floppy-o"></i> Print
                        </a>
                        <a class="btn btn-sm btn-default" ng-click="resetCP()" data-dismiss="modal">Cancel Print</a>
                    </div>
                </div>
            </div>
        </div>

        @Html.Partial("~/Areas/NeoERP.DocumentTemplate/Views/Shared/PartialView/_purchaseExpenseSheet.cshtml")
    </div>
</div>



<script>

    $(function () { 
        setTimeout(function () {

            $(".k-list").slimScroll({
                position: 'right',
                alwaysVisible: false,
                // height: '150',
            });

            $(".dynamic-table tbody").slimScroll({
                position: 'right',
                alwaysVisible: false,
                height: '150',
            });
            $(".subledger-table tbody").slimScroll({
                position: 'right',
                alwaysVisible: false,
                height: '120',
            });
            $('.dynamic_child_table6').find('div:first').css('overflow', 'visible');
            $('.childPopup').css('overflow','auto');
        }, 2000);
    });

    function flagKyeDown($this) {
        var a = $this;        
        $('.subledgerModal').modal('toggle');
    }

    $('#toggle-switcher').click(function () {
        if ($(this).hasClass('opened')) {
            $(this).removeClass('opened');
            $('#style-switcher').animate({ 'left': '0px', 'width': '34px' });
        } else {
            $(this).addClass('opened');
            $('#style-switcher').animate({ 'left': '-241px', 'width': '273px' });
        }
    });



    $('#toggle-switcher-2').click(function () {
        if ($(this).hasClass('opened')) {
            $(this).removeClass('opened');
            $('#style-switcher-2').animate({ 'left': '0px', 'width': '34px' });
        } else {
            $(this).addClass('opened');
            $('#style-switcher-2').animate({ 'left': '-241px', 'width': '273px' });
        }
    });

    //$('a').tooltip();

    //setTimeout(function () {
    $('#element__VOUCHER_NO').focus();
    //},
    //    1000);
</script>


<script>
    var dt = $.Deferred();
    var elements = null;
    $(document).ready(function () {
        $("body").tooltip({ selector: '[data-toggle=tooltip]' });
        $('i.font-green').hide();
        setTimeout(function () {
            $(".k-list").slimScroll({
                position: 'right',
                alwaysVisible: false,
                //height: '500',
            });
        }, 500);
        $.when(dt).then(function (res) {
            elements;
            if (elements != undefined) {
                $.each(elements, function (key, value) {
                    var item = this;
                    if (item.COLUMN_NAME.indexOf('DATE') !== -1) {
                        //current_date = getNepaliDate();
                        //$("#nepaliDate5_" + item.COLUMN_NAME).val(current_date);
                        //$(".nepali-calendar").nepaliDatePicker({
                        //    npdMonth: true,
                        //    npdYear: true,
                        //    npdYearCount: 10,
                        //    altFormat: "dd-MMM-YYYY",
                        //    dateFormat: "dd-MMM-YYYY",

                        //});

                    }


                });
            }
        });

        $('.nav-tabs a').on('click', function (e) {
            e.preventDefault();
            if ($(this).attr('href') == '#tab_15_2') {
                $('#tab_15_2').tab('show')
            }
            if ($(this).attr('href') == '#tab_15_3') {
                $('#tab_15_3').tab('show')
            }
            if ($(this).attr('href') == '#tab_15_4') {
                $('#tab_15_4').tab('show')
            }


        });

        //$(document).keydown(function (e) {
        //    if (e.keyCode == 9) {  //tab pressed
        //
        //        e.preventDefault();
        //        var pageElems = document.querySelectorAll('input, select, textarea, button'),
        //            elem = e.srcElement
        //        focusNext = false,
        //            len = pageElems.length;
        //        for (var i = 0; i < len; i++) {
        //            var pe = pageElems[i];
        //            if (focusNext) {
        //                if (pe.style.display !== 'none' && pe.type != 'hidden' && pe.disabled == false && pe.readOnly == false) {
        //                    pe.focus();
        //                    break;
        //                }
        //            } else if (pe === e.srcElement) {
        //                focusNext = true;
        //            }
        //        }
        //    }
        //});

    });

    function ConvertEngDateToNep(eng) {

        //;
        if (eng === undefined)
            return;
        var engmonthreq = "";
        var arr = eng.split('-');
        var day = (arr[0]);
        var month = (arr[1]);
        var year = (arr[2]);
        if (month == "Jan") { engmonthreq = "01" }
        else if (month == "Feb") { engmonthreq = "02" }
        else if (month == "Mar") { engmonthreq = "03" }
        else if (month == "Apr") { engmonthreq = "04" }
        else if (month == "May") { engmonthreq = "05" }
        else if (month == "Jun") { engmonthreq = "06" }
        else if (month == "Jul") { engmonthreq = "07" }
        else if (month == "Aug") { engmonthreq = "08" }
        else if (month == "Sep") { engmonthreq = "09" }
        else if (month == "Oct") { engmonthreq = "10" }
        else if (month == "Nov") { engmonthreq = "11" }
        else if (month == "Dec") { engmonthreq = "12" }
        engdatereq = year + '-' + engmonthreq + '-' + day;
        return convertednepdate = AD2BS(engdatereq);
    }
    function CorrectionEngDateFormat(eng) {

        //;
        if (eng === undefined)
            return;
        var engmonthreq = "";
        var arr = eng.split('-');
        var day = (arr[0]);
        var month = (arr[1]);

        var year = (arr[2]);
        if (month == "01") { engmonthreq = "Jan" }
        else if (month == "02") { engmonthreq = "Feb" }
        else if (month == "03") { engmonthreq = "Mar" }
        else if (month == "04") { engmonthreq = "Apr" }
        else if (month == "05") { engmonthreq = "May" }
        else if (month == "06") { engmonthreq = "Jun" }
        else if (month == "07") { engmonthreq = "Jul" }
        else if (month == "08") { engmonthreq = "Aug" }
        else if (month == "09") { engmonthreq = "Sep" }
        else if (month == "10") { engmonthreq = "Oct" }
        else if (month == "11") { engmonthreq = "Nov" }
        else if (month == "12") { engmonthreq = "Dec" }
        if (engmonthreq == "") {
            return;
        }
        else {
            engdatereq = day + '-' + engmonthreq + '-' + year;
            return engdatereq;
        }

    }

</script>
